{
    "version": "v2",
    "type": "user-interface",
    "title": "React Autocomplete Search",
    "openFile": "/src/App.tsx",
    "dependencies": {
        "react": "18.x",
        "react-dom": "18.x",
        "react-scripts": "5.0.1"
    },
    "files": {
        "/package.json": {
            "code": "{\n  \"name\": \"react-autocomplete-search\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"dependencies\": {\n    \"react\": \"18.x\",\n    \"react-dom\": \"18.x\",\n    \"react-scripts\": \"5.0.1\"\n  },\n  \"scripts\": { \"start\": \"react-scripts start\" }\n}\n"
        },
        "/public/index.html": {
            "code": "<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"><title>React SDK • Autocomplete</title></head><body><div id=\"root\"></div></body></html>"
        },
        "/src/index.tsx": {
            "code": "import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App';\n\ncreateRoot(document.getElementById('root')!).render(<App />);\n"
        },
        "/src/App.tsx": {
            "code": "import React, { useEffect, useRef, useState } from 'react';\nimport './App.css';\n\nconst CITIES: string[] = [\n  'Amsterdam', 'Ankara', 'Athens', 'Austin',\n  'Barcelona', 'Berlin', 'Boston', 'Brussels',\n  'Chicago', 'Copenhagen',\n  'Dubai',\n  'Edinburgh',\n  'Frankfurt',\n  'Hamburg',\n  'Istanbul', 'Izmir',\n  'London', 'Los Angeles',\n  'Madrid', 'Miami', 'Milan', 'Munich',\n  'New York',\n  'Oslo',\n  'Paris', 'Prague',\n  'Rome',\n  'San Diego', 'San Francisco', 'San Jose', 'Seattle',\n  'Tokyo',\n  'Vienna',\n  'Zurich'\n];\n\nexport default function App() {\n  const rootRef = useRef<HTMLDivElement | null>(null);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const listboxId = 'autocomplete-listbox';\n\n  const [query, setQuery] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const [results, setResults] = useState<string[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // TODO: implement debounced search based on `query`\n  // - trim query\n  // - if empty => close + clear results + isLoading=false\n  // - else open + set isLoading=true, async search with latency\n  // - on resolve: setResults + isLoading=false\n  useEffect(() => {\n    // TODO\n  }, [query]);\n\n  function onFocus() {\n    // TODO: if trimmed query non-empty => open dropdown\n  }\n\n  // NOTE: use DOM KeyboardEvent type (no React namespace)\n  function onKeyDown(ev: KeyboardEvent) {\n    // TODO: ArrowUp/ArrowDown/Enter/Escape\n  }\n\n  function select(value: string) {\n    // TODO: set query, close dropdown, reset activeIndex\n  }\n\n  function highlight(item: string, queryRaw: unknown): string {\n    // TODO: highlight match using <mark> + escape HTML\n    return escapeHtml(String(item));\n  }\n\n  // TODO: outside click close\n  useEffect(() => {\n    // TODO: document mousedown listener, close if click outside rootRef\n  }, []);\n\n  async function search(q: string): Promise<string[]> {\n    // TODO: filter CITIES and simulate latency (~150ms). Return max 8.\n    return [];\n  }\n\n  function escapeHtml(s: string): string {\n    return s\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\\\"/g, '&quot;')\n      .replace(/'/g, '&#39;');\n  }\n\n  const activeDesc = activeIndex >= 0 ? `opt-${activeIndex}` : undefined;\n\n  return (\n    <main className=\"page\">\n      <section className=\"card\">\n        <h1 className=\"title\">Autocomplete</h1>\n\n        <div\n          ref={rootRef}\n          className=\"combo\"\n          role=\"combobox\"\n          aria-haspopup=\"listbox\"\n          aria-expanded={isOpen}\n          aria-owns={listboxId}\n          aria-activedescendant={activeDesc}\n        >\n          <label className=\"label\" htmlFor=\"q\">Search</label>\n          <input\n            ref={inputRef}\n            id=\"q\"\n            className=\"input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            placeholder=\"Type a city...\"\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n            onFocus={onFocus}\n            onKeyDown={(e) => onKeyDown(e.nativeEvent)}\n          />\n\n          {isOpen && (\n            <ul className=\"list\" role=\"listbox\" id={listboxId}>\n              {results.map((item, i) => (\n                <li\n                  key={item}\n                  className={i === activeIndex ? 'option active' : 'option'}\n                  role=\"option\"\n                  id={`opt-${i}`}\n                  aria-selected={i === activeIndex}\n                  onMouseDown={() => select(item)}\n                  dangerouslySetInnerHTML={{ __html: highlight(item, query) }}\n                />\n              ))}\n\n              {isLoading && <li className=\"empty\">Loading…</li>}\n              {!isLoading && results.length === 0 && <li className=\"empty\">No results</li>}\n            </ul>\n          )}\n        </div>\n\n        <p className=\"hint\">Keyboard: ↑/↓ navigate, Enter select, Esc close.</p>\n      </section>\n    </main>\n  );\n}\n"
        },
        "/src/App.css": {
            "code": ":root{color-scheme:dark;}html,body{margin:0;height:100%;background:#0a0a0a;}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}\n.page{min-height:100vh;display:grid;place-items:center;padding:24px;background:#0a0a0a;color:#e5e7eb;}\n.card{width:100%;max-width:520px;background:#0b1020;border:1px solid #1f2937;border-radius:14px;padding:18px;display:grid;gap:14px;}\n.title{margin:0;font-size:18px;font-weight:800;}\n.label{display:block;font-size:12px;color:#9ca3af;margin-bottom:6px;}\n.combo{position:relative;}\n.input{width:100%;padding:12px 12px;border-radius:12px;border:1px solid #374151;background:#0a0f1e;color:#e5e7eb;outline:none;}\n.input:focus{border-color:#a3e635;box-shadow:0 0 0 2px rgba(163,230,53,.15);}\n.list{position:absolute;z-index:10;left:0;right:0;margin-top:8px;max-height:240px;overflow:auto;border-radius:12px;border:1px solid #1f2937;background:#0a0f1e;}\n.option{padding:10px 12px;cursor:pointer;border-bottom:1px solid rgba(31,41,55,.5);}\n.option:last-child{border-bottom:none;}\n.option.active{background:rgba(163,230,53,.12);}\n.empty{padding:10px 12px;color:#9ca3af;}\n.hint{margin:0;color:#9ca3af;font-size:12px;}\nmark{background:rgba(163,230,53,.25);color:#e5e7eb;border-radius:4px;padding:0 2px;}\n"
        },
        "/tsconfig.json": {
            "code": "{\n  \"compilerOptions\": {\n    \"jsx\": \"react-jsx\",\n    \"target\": \"ES2020\",\n    \"module\": \"ESNext\",\n    \"strict\": true\n  }\n}\n"
        }
    }
}