{
    "version": "v2",
    "type": "coding",
    "title": "React - Debug Double Render",
    "openFile": "src/App.tsx",
    "dependencies": {
        "react": "18.x",
        "react-dom": "18.x",
        "react-scripts": "5.0.1"
    },
    "files": {
        "package.json": "{\n  \"name\": \"react-debug-double-render\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"dependencies\": {\n    \"react\": \"18.x\",\n    \"react-dom\": \"18.x\",\n    \"react-scripts\": \"5.0.1\"\n  },\n  \"scripts\": { \"start\": \"react-scripts start\" }\n}\n",
        "public/index.html": "<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"><title>React SDK - Debug Double Render</title></head><body><div id=\"root\"></div></body></html>",
        "src/index.tsx": "import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App';\n\ncreateRoot(document.getElementById('root')!).render(<App />);\n",
        "src/App.tsx": "import React, { useEffect, useRef, useState } from 'react';\nimport './App.css';\n\nexport default function App() {\n  const [count, setCount] = useState(0);\n\n  // BUG: derived state stored in state causes a second render after every update.\n  const [parity, setParity] = useState<'even' | 'odd'>('even');\n\n  const renders = useRef(0);\n  renders.current += 1;\n\n  useEffect(() => {\n    // TODO: This effect triggers a second render every time count changes.\n    // Fix the double-render issue without breaking the parity label.\n    setParity(count % 2 === 0 ? 'even' : 'odd');\n  }, [count]);\n\n  const increment = () => setCount((c) => c + 1);\n  const reset = () => {\n    setCount(0);\n    setParity('even');\n  };\n\n  return (\n    <main className=\"page\">\n      <section className=\"card\">\n        <h1 className=\"title\">Debug Double Render</h1>\n        <p className=\"subtitle\">Each click currently causes two renders. Fix it so it only renders once.</p>\n\n        <div className=\"stats\">\n          <div className=\"stat\">\n            <div className=\"k\">Count</div>\n            <div className=\"v\" data-testid=\"count\">{count}</div>\n          </div>\n          <div className=\"stat\">\n            <div className=\"k\">Parity</div>\n            <div className=\"v\" data-testid=\"parity\">{parity}</div>\n          </div>\n          <div className=\"stat\">\n            <div className=\"k\">Renders</div>\n            <div className=\"v\" data-testid=\"renders\">{renders.current}</div>\n          </div>\n        </div>\n\n        <div className=\"actions\">\n          <button className=\"btn\" onClick={increment}>Increment</button>\n          <button className=\"btn ghost\" onClick={reset}>Reset</button>\n        </div>\n\n        <div className=\"panel\">\n          <div className=\"label\">Expected</div>\n          <div className=\"hint\">Render count should increase by 1 per click. Keep parity accurate.</div>\n        </div>\n      </section>\n    </main>\n  );\n}\n",
        "src/App.css": ":root{color-scheme:dark;}html,body{margin:0;height:100%;background:#0a0a0a;}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}\n.page{min-height:100vh;display:grid;place-items:center;padding:24px;background:#0a0a0a;color:#e5e7eb;}\n.card{width:100%;max-width:640px;background:#0b1020;border:1px solid #1f2937;border-radius:14px;padding:18px;display:grid;gap:14px;}\n.title{margin:0;font-size:18px;font-weight:800;}\n.subtitle{margin:0;color:#9ca3af;font-size:12px;}\n.stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}\n.stat{background:#0a0f1e;border:1px solid #1f2937;border-radius:12px;padding:10px 12px;display:flex;justify-content:space-between;align-items:baseline;}\n.k{color:#9ca3af;font-size:12px;}\n.v{font-size:18px;font-weight:900;}\n.actions{display:flex;gap:8px;flex-wrap:wrap;}\n.btn{background:#a3e635;color:#111;border:none;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer;}\n.btn.ghost{background:transparent;color:#e5e7eb;border:1px solid #374151;}\n.panel{background:#0a0f1e;border:1px solid #1f2937;border-radius:12px;padding:12px;display:grid;gap:6px;}\n.label{font-weight:800;}\n.hint{color:#9ca3af;font-size:12px;line-height:1.35;}\n@media (max-width: 560px){.stats{grid-template-columns:1fr;}}\n",
        "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"jsx\": \"react-jsx\",\n    \"target\": \"ES2020\",\n    \"module\": \"ESNext\",\n    \"strict\": true\n  }\n}\n"
    }
}
