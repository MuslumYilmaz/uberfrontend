{
    "version": "v2",
    "type": "user-interface",
    "title": "Angular • Nested Comments (solution)",
    "openFile": "/src/app/app.component.ts",
    "dependencies": {
        "@angular/core": "17.1.0",
        "@angular/common": "17.1.0",
        "@angular/platform-browser": "17.1.0",
        "@angular/forms": "17.1.0",
        "rxjs": "7.8.1",
        "zone.js": "^0.14.2"
    },
    "files": {
        "/package.json": {
            "code": "{\n  \"name\": \"angular-nested-comments-solution\",\n  \"private\": true\n}\n"
        },
        "/src/main.ts": {
            "code": "import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nbootstrapApplication(AppComponent).catch(console.error);\n"
        },
        "/src/index.html": {
            "code": "<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <title>Angular SDK • Nested Comments (solution)</title>\n  </head>\n  <body>\n    <app-root></app-root>\n  </body>\n</html>\n"
        },
        "/src/styles.css": {
            "code": ":root { color-scheme: dark; }\nhtml, body { margin: 0; height: 100%; background:#0a0a0a; }\nbody { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color:#e5e7eb; }\n"
        },
        "/tsconfig.json": {
            "code": "{\n  \"compilerOptions\": {\n    \"target\": \"es2022\",\n    \"strict\": true,\n    \"noEmitOnError\": false\n  }\n}\n"
        },
        "/src/app/app.component.ts": {
            "code": "import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\ntype CommentNode = {\n  id: string;\n  text: string;\n  children: CommentNode[];\n};\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  comments: CommentNode[] = [];\n\n  topDraft = '';\n\n  activeReplyId: string | null = null;\n  replyDraft = '';\n\n  private nextId = 1;\n  private makeId(): string {\n    return String(this.nextId++);\n  }\n\n  addTop(): void {\n    const text = this.topDraft.trim();\n    if (!text) return;\n\n    this.comments.unshift({ id: this.makeId(), text, children: [] });\n    this.topDraft = '';\n  }\n\n  openReply(id: string): void {\n    this.activeReplyId = id;\n    this.replyDraft = '';\n  }\n\n  cancelReply(): void {\n    this.activeReplyId = null;\n    this.replyDraft = '';\n  }\n\n  submitReply(parentId: string): void {\n    const text = this.replyDraft.trim();\n    if (!text) return;\n\n    const parent = this.findById(this.comments, parentId);\n    if (!parent) return;\n\n    parent.children.push({ id: this.makeId(), text, children: [] });\n    this.cancelReply();\n  }\n\n  private findById(nodes: CommentNode[], id: string): CommentNode | null {\n    for (const n of nodes) {\n      if (n.id === id) return n;\n      const found = this.findById(n.children, id);\n      if (found) return found;\n    }\n    return null;\n  }\n}\n"
        },
        "/src/app/app.component.html": {
            "code": "<main class=\"page\">\n  <section class=\"card\">\n    <h1 class=\"title\">Nested Comments (Solution)</h1>\n    <p class=\"subtitle\">Infinite replies, single active reply input, recursive rendering.</p>\n\n    <div class=\"composer\">\n      <textarea [(ngModel)]=\"topDraft\" rows=\"3\" placeholder=\"Write a comment...\"></textarea>\n      <button (click)=\"addTop()\">Add Comment</button>\n    </div>\n\n    <div class=\"list\">\n      <ng-container\n        *ngTemplateOutlet=\"treeTpl; context: { $implicit: comments, depth: 0 }\"\n      ></ng-container>\n\n      <ng-template #treeTpl let-nodes let-depth=\"depth\">\n        <div *ngFor=\"let c of nodes\" class=\"node\" [style.marginLeft.px]=\"depth * 16\">\n          <div class=\"bubble\">\n            <div class=\"text\">{{ c.text }}</div>\n            <div class=\"meta\">\n              <button class=\"ghost\" (click)=\"openReply(c.id)\">Reply</button>\n            </div>\n\n            <div class=\"reply\" *ngIf=\"activeReplyId === c.id\">\n              <input [(ngModel)]=\"replyDraft\" placeholder=\"Write a reply...\" />\n              <div class=\"replyActions\">\n                <button (click)=\"submitReply(c.id)\">Post</button>\n                <button class=\"ghost\" (click)=\"cancelReply()\">Cancel</button>\n              </div>\n            </div>\n          </div>\n\n          <ng-container\n            *ngIf=\"c.children.length\"\n            [ngTemplateOutlet]=\"treeTpl\"\n            [ngTemplateOutletContext]=\"{ $implicit: c.children, depth: depth + 1 }\"\n          ></ng-container>\n        </div>\n      </ng-template>\n    </div>\n\n    <div class=\"hint\">Click Reply on different comments: the input should move, not duplicate.</div>\n  </section>\n</main>\n"
        },
        "/src/app/app.component.css": {
            "code": ".page{min-height:100vh;display:grid;place-items:center;background:#0a0a0a;padding:24px;}\n.card{width:100%;max-width:720px;background:#0b1020;border:1px solid #1f2937;border-radius:16px;padding:18px;display:grid;gap:14px;color:#e5e7eb;}\n.title{margin:0;font-size:20px;font-weight:900;color:#e5e7eb;}\n.subtitle{margin:0;color:#9ca3af;font-size:12px;line-height:1.45;}\n\n.composer{display:grid;gap:10px;}\ntextarea{width:100%;resize:vertical;min-height:70px;background:#0a0f1e;color:#e5e7eb;border:1px solid #1f2937;border-radius:12px;padding:10px;}\ntextarea::placeholder{color:#6b7280;}\n\n.list{display:grid;gap:10px;}\n.node{display:grid;gap:8px;}\n.bubble{background:#0a0f1e;border:1px solid #1f2937;border-radius:14px;padding:12px;display:grid;gap:10px;color:#e5e7eb;}\n.text{font-size:14px;line-height:1.4;color:#e5e7eb;}\n.meta{display:flex;gap:8px;}\n\n.reply{display:grid;gap:8px;margin-top:6px;}\n.reply input{width:100%;background:#0b1020;color:#e5e7eb;border:1px solid #1f2937;border-radius:12px;padding:10px;}\n.reply input::placeholder{color:#6b7280;}\n.replyActions{display:flex;gap:8px;flex-wrap:wrap;}\n\nbutton{background:#a3e635;color:#111;border:none;border-radius:12px;padding:10px 14px;font-weight:900;cursor:pointer;}\nbutton.ghost{background:transparent;color:#e5e7eb;border:1px solid #374151;}\n\n.hint{color:#9ca3af;font-size:12px;line-height:1.45;}\n"
        }
    }
}