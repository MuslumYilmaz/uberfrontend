{
    "id": "image-upload-preview",
    "title": "Image Upload & Preview",
    "description": "Design an Image Upload & Preview flow for a real product (e.g., profile photo). This is a front-end system design prompt: you own the client pipeline from selection to preview to upload, with progress, retry, and graceful failure. Assume a backend can provide a pre-signed upload URL, but your focus is on the frontend architecture.\n\nFunctional requirements:\n- Let the user choose an image via file input (optional drag-and-drop).\n- Validate file type, size, and basic dimensions before previewing.\n- Generate a fast preview with correct orientation (EXIF) and no layout shift.\n- Optionally resize/compress on the client to meet size limits.\n- Upload to a storage URL with progress, cancel, and retry.\n- Return a stable URL/asset id for the uploaded image to the parent form.\n- Allow replacing or removing the selected image at any time.\n\nNon-functional:\n- Main-thread safe: avoid jank during preview/resize on mid-range devices.\n- Resilient on slow or flaky networks (retry with backoff).\n- Bounded memory usage (no base64 blobs in state).\n- Accessible and mobile friendly by default.\n\nData constraints:\n- Single-image upload; max size ~10 MB before compression.\n- Allowed MIME types: image/jpeg, image/png, image/webp.\n- Min dimensions (e.g., 256x256) and aspect ratio rules may apply.\n- Upload uses a backend-provided URL; frontend handles the pipeline.\n",
    "tags": [
        "images",
        "upload",
        "validation"
    ],
    "sections": [
        {
            "key": "R",
            "title": "Requirements exploration",
            "file": "requirements.json"
        },
        {
            "key": "A",
            "title": "Architecture / High-level design",
            "file": "architecture.json"
        },
        {
            "key": "D",
            "title": "Data model",
            "file": "data.json"
        },
        {
            "key": "I",
            "title": "Interface definition (API)",
            "file": "interfaces.json"
        },
        {
            "key": "O",
            "title": "Optimizations and deep dive",
            "file": "optimizations.json"
        }
    ]
}
