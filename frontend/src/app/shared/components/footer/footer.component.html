<footer class="footer fixed bottom-0 left-0 right-0 z-30 bg-neutral-900 border-t border-white/10">
    <!-- 3-col grid: left (outline) | center (cluster) | right (submit) -->
    <div class="bar">
        <!-- LEFT -->
        <div class="left">
            <button *ngIf="isCourse && hasOutline && leftCourseLabel" class="left-trigger" type="button"
                (click)="openMenu()" aria-label="Open course outline">
                <span class="icon">☰</span>
                <span class="truncate">{{ leftCourseLabel }}</span>
            </button>
        </div>

        <!-- CENTER -->
        <div class="center">
            <!-- Practice cluster -->
            <div class="cluster" *ngIf="isPractice">
                <button class="pbtn-sm" type="button" (click)="prev.emit()" [disabled]="prevDisabled">← Prev</button>
                <span class="progress" *ngIf="progressText">{{ progressText }}</span>
                <button class="pbtn-sm" type="button" (click)="next.emit()" [disabled]="nextDisabled"
                    [pTooltip]="nextDisabled ? (nextDisabledTooltip || '') : ''"
                    [tooltipDisabled]="!(nextDisabled && nextDisabledTooltip)" tooltipPosition="top">
                    Next →
                </button>
            </div>

            <!-- Course cluster -->
            <div class="cluster" *ngIf="isCourse">
                <button class="pbtn-sm" type="button" (click)="coursePrev.emit()" [disabled]="!coursePrevLabel">
                    ← {{ coursePrevLabel || 'Back' }}
                </button>

                <span class="sep">·</span>

                <button *ngIf="breadcrumbLabel" class="crumb" type="button" (click)="back.emit()"
                    [title]="breadcrumbLabel">
                    {{ breadcrumbLabel }}
                </button>

                <span class="suffix" *ngIf="middleSuffixLabel">{{ middleSuffixLabel }}</span>

                <button class="pbtn-sm" type="button" (click)="courseNext.emit()"
                    [disabled]="!courseNextLabel || nextDisabled"
                    [pTooltip]="nextDisabled ? (nextDisabledTooltip || '') : ''"
                    [tooltipDisabled]="!(nextDisabled && nextDisabledTooltip)" tooltipPosition="top">
                    {{ courseNextLabel ? ('Next: ' + courseNextLabel) : 'Next' }} →
                </button>
            </div>
        </div>

        <!-- RIGHT -->
        <div class="right">
            <button *ngIf="showSubmit" class="pbtn-sm primary" type="button" (click)="submit.emit()">
                {{ submitLabel }}
            </button>
        </div>
    </div>
</footer>

<!-- Drawer -->
<div class="drawer-backdrop" *ngIf="menuVisible()" [class.show]="menuOpen()" (click)="closeMenu()">
    <aside class="drawer" [class.show]="menuOpen()" (click)="$event.stopPropagation()">
        <header class="drawer-header">
            <div class="title">Course outline</div>
            <button class="close" (click)="closeMenu()" aria-label="Close">✕</button>
        </header>

        <div class="drawer-content">
            <section class="topic" *ngFor="let t of outline; trackBy: trackTopic">
                <div class="topic-title">{{ t.title }}</div>
                <ul class="lessons">
                    <li *ngFor="let l of t.lessons; trackBy: trackLesson" [class.active]="l.id === currentLessonId">
                        <button class="lesson-row" (click)="onSelect(t.id, l.id)" type="button">
                            <span class="pill" [class.reading]="l.type==='reading'" [class.coding]="l.type==='coding'">
                                {{ l.type }}
                            </span>
                            <span class="lesson-title">{{ l.title }}</span>
                        </button>
                    </li>
                </ul>
            </section>
        </div>
    </aside>
</div>