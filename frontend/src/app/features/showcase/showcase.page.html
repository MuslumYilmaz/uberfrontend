<section class="showcase-hero reveal" #observeSection aria-labelledby="showcase-hero-title">
  <div class="ambient ambient-a"></div>
  <div class="ambient ambient-b"></div>
  <div class="shell hero-grid">
      <div class="hero-copy">
      <p class="eyebrow">Frontend interview preparation platform</p>
      <h1 id="showcase-hero-title" data-testid="showcase-hero-title">{{ heroHeadline }}</h1>
      <p class="lede">
        {{ heroLede }}
      </p>
      <div class="proof-row" aria-label="Platform proof points">
        <span class="proof-chip"><i class="pi pi-sitemap"></i>Real workflow</span>
        <span class="proof-chip"><i class="pi pi-eye"></i>UI-first problems</span>
        <span class="proof-chip"><i class="pi pi-check-circle"></i>Fast feedback</span>
      </div>
      <div class="hero-actions">
        <a
          class="sk-btn sk-btn-primary"
          [routerLink]="['/react', 'coding', 'react-counter']"
          (click)="onHeroPrimaryClick()"
          aria-label="Start with a free React challenge">
          {{ heroPrimaryCtaLabel }}
        </a>
        <a class="sk-btn sk-btn-ghost" routerLink="/coding" aria-label="Browse coding challenges">Browse challenges</a>
      </div>
      <div class="chip-cloud" aria-hidden="true">
        <span class="floating-chip" *ngFor="let chip of heroBadges; let i = index" [attr.data-tone]="chip.tone"
          [style.--i]="i">
          {{ chip.label }}
        </span>
      </div>
    </div>

    <div class="hero-proof" aria-label="Product workflow overview">
      <div class="proof-card glass">
        <div class="proof-top">
          <div class="window-dots" aria-hidden="true">
            <span></span><span></span><span></span>
          </div>
          <div class="live-pill neutral"><span class="dot"></span>Workflow</div>
        </div>

        <div class="flow-panel" aria-label="Product workflow overview">
          <div class="flow-step" *ngFor="let step of heroFlowSteps; let i = index"
            [class.active]="i === activeFlowIndex" [attr.data-status]="step.status">
            <div class="flow-icon" aria-hidden="true">
              <i class="{{ step.icon }}"></i>
            </div>
            <div class="flow-meta">
              <div class="flow-title">{{ step.title }}</div>
              <div class="flow-sub">{{ step.subtitle }}</div>
            </div>
            <div class="flow-indicator" aria-hidden="true">
              <span class="indicator-bar"></span>
              <span class="indicator-dot"></span>
            </div>
          </div>
          <p class="flow-caption">Interactive playground is below.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="demo-title" data-load="demo">
  <div class="shell section-head">
    <div>
      <p class="eyebrow">Interactive demo</p>
      <h2 id="demo-title">Run the actual coding workspace.</h2>
      <p class="muted">Live editor, real tests, and the same UI you get in the product.</p>
      <div class="demo-tabs" role="tablist" aria-label="Pick a live demo question">
        <button type="button" class="demo-tab" *ngFor="let tab of demoTabsPrimary" role="tab"
          [attr.id]="'demo-tab-' + tab.key" [class.active]="tab.key === activePrimaryKey"
          [attr.data-testid]="'showcase-demo-tab-' + tab.key"
          (click)="setActivePrimary(tab.key)" [attr.aria-selected]="tab.key === activePrimaryKey"
          [attr.aria-controls]="'demo-pane'">
          <span class="tab-label">{{ tab.label }}</span>
          <span class="tab-sub">{{ tab.caption }}</span>
        </button>
      </div>
      <div class="demo-tabs demo-tabs-secondary" role="tablist" aria-label="Pick a framework demo"
        *ngIf="activePrimaryKey === 'ui'">
        <button type="button" class="demo-tab" *ngFor="let tab of demoTabsFramework" role="tab"
          [attr.id]="'demo-tab-' + tab.key" [class.active]="tab.key === activeFrameworkKey"
          [attr.data-testid]="'showcase-demo-tab-' + tab.key"
          (click)="setActiveFramework(tab.key)" [attr.aria-selected]="tab.key === activeFrameworkKey"
          [attr.aria-controls]="'demo-pane'">
          <span class="tab-label">{{ tab.label }}</span>
          <span class="tab-sub">{{ tab.caption }}</span>
        </button>
      </div>
    </div>
  </div>

  <div class="shell">
    <div class="demo-meta">
      <span class="pill">{{ activeDemo.pill }}</span>
      <span class="demo-active-label" aria-live="polite">{{ activeDemo.caption }}</span>
      <button type="button" class="demo-hide-btn" *ngIf="isHideableDemo && !showMobileCodingGuard" (click)="toggleDemoVisibility()"
        [attr.aria-expanded]="!demoHidden" aria-controls="demo-pane">
        {{ demoHidden ? 'Show demo' : 'Hide demo' }}
      </button>
    </div>
    <div class="demo-frame-wrap" [class.hidden]="demoHidden">
      <ng-container *ngIf="!showMobileCodingGuard; else demoMobileGuard">
        <div class="demo-frame glass" role="tabpanel" id="demo-pane"
          [attr.aria-labelledby]="'demo-tab-' + activeDemo.key">
          <ng-container *ngIf="isBrowser; else demoPlaceholder">
            <ng-container *ngIf="demoComponent; else demoPlaceholder">
              <ng-container *ngFor="let tab of allDemoTabs">
                <ng-container *ngIf="tab.key === activeDemoKey">
                  <ng-container *ngComponentOutlet="demoComponent; inputs: demoInputs"></ng-container>
                </ng-container>
              </ng-container>
            </ng-container>
          </ng-container>
        </div>
      </ng-container>
    </div>

    <ng-template #demoMobileGuard>
      <div class="demo-mobile-guard-shell" data-testid="showcase-demo-mobile-guard">
        <article class="demo-mobile-guard-card">
          <div class="demo-mobile-guard-pill">Desktop or Tablet</div>
          <h3 class="demo-mobile-guard-title">{{ activeDemo.label }} demo</h3>
          <p class="demo-mobile-guard-copy">
            The coding workspace is disabled on small mobile screens.
            Use desktop or tablet for the editor + preview layout.
          </p>
          <ul class="demo-mobile-guard-list">
            <li>Full editor with split panes</li>
            <li>Live preview and tests side by side</li>
            <li>Faster debugging and iteration</li>
          </ul>
          <div class="demo-mobile-guard-actions">
            <a class="sk-btn sk-btn-primary"
              [routerLink]="['/', activeDemo.questionTech, 'coding', activeDemo.questionId]"
              data-testid="showcase-demo-mobile-guard-open"
              aria-label="Open this coding challenge">
              Open challenge
            </a>
            <a class="sk-btn sk-btn-ghost" routerLink="/coding" data-testid="showcase-demo-mobile-guard-browse"
              aria-label="Browse coding questions">
              Browse coding
            </a>
          </div>
        </article>
      </div>
    </ng-template>

    <ng-template #demoPlaceholder>
      <div class="demo-placeholder">
        <div class="demo-placeholder__title">Interactive demo</div>
        <p class="demo-placeholder__copy">
          Preparing the live editor and preview…
        </p>
        <div class="demo-placeholder__meta">
          {{ demoLoading ? 'Loading demo…' : 'Loading on first paint' }}
        </div>
      </div>
    </ng-template>


    <a class="demo-banner" [routerLink]="['/', activeDemo.questionTech, 'coding', activeDemo.questionId]" role="button" [class.hidden]="demoHidden || showMobileCodingGuard"
      aria-label="Open the live editor for this demo question" data-testid="showcase-demo-open-live">
      <span class="dot" aria-hidden="true"></span>
      <span class="text">Try the {{ activeDemo.label }} demo in the live editor</span>
      <i class="pi pi-arrow-right" aria-hidden="true"></i>
    </a>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="trivia-preview-title" data-load="trivia">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">Trivia snapshot</p>
        <h2 id="trivia-preview-title">See a real quiz slice.</h2>
      </div>
      <p class="muted">Cropped from the live trivia detail page.</p>
    </div>

    <div class="demo-tabs" role="tablist" aria-label="Pick a trivia question preview">
      <button type="button" class="demo-tab" *ngFor="let tab of triviaTabs" role="tab"
        [attr.id]="'trivia-tab-' + tab.key" [class.active]="tab.key === activeTriviaKey"
        [attr.data-testid]="'showcase-trivia-tab-' + tab.key"
        (click)="setActiveTrivia(tab.key)" [attr.aria-selected]="tab.key === activeTriviaKey"
        aria-controls="trivia-pane">
        <span class="tab-label">{{ tab.label }}</span>
        <span class="tab-sub">{{ tab.caption }}</span>
      </button>
    </div>

    <div class="trivia-preview-card glass" role="region" aria-label="Trivia question preview">
      <div class="trivia-frame" role="tabpanel" id="trivia-pane"
        [attr.aria-labelledby]="'trivia-tab-' + activeTriviaTab.key">
        <ng-container *ngIf="triviaDetailComponent; else triviaPlaceholder">
          <ng-container *ngComponentOutlet="triviaDetailComponent; injector: triviaInjector"></ng-container>
        </ng-container>
        <ng-template #triviaPlaceholder>
          <div class="preview-placeholder">Preview loads when you interact.</div>
        </ng-template>
        <div class="trivia-gradient" aria-hidden="true"></div>
      </div>
    </div>

    <a class="demo-banner" [routerLink]="triviaPreviewLink" role="button"
      data-testid="showcase-trivia-open"
      [attr.aria-label]="'Open the full ' + activeTriviaTab.label + ' trivia question'">
      <span class="dot" aria-hidden="true"></span>
      <span class="text">Read the rest in the app →</span>
      <i class="pi pi-arrow-right" aria-hidden="true"></i>
    </a>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="system-preview-title" data-load="system">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">System design snapshot</p>
        <h2 id="system-preview-title">Architecture slices, not slides.</h2>
      </div>
      <p class="muted">A real front-end system design walkthrough, clipped for a quick peek.</p>
    </div>

    <div class="system-preview-card glass" role="region" aria-label="System design question preview">
      <div class="system-frame" role="tabpanel">
        <ng-container *ngIf="systemDesignDetailComponent; else systemPlaceholder">
          <ng-container *ngComponentOutlet="systemDesignDetailComponent; injector: systemInjector"></ng-container>
        </ng-container>
        <ng-template #systemPlaceholder>
          <div class="preview-placeholder">Preview loads when you scroll to this section.</div>
        </ng-template>
        <div class="trivia-gradient" aria-hidden="true"></div>
      </div>
    </div>

    <a class="demo-banner" [routerLink]="systemPreviewLink" role="button"
      aria-label="Open the full system design scenario">
      <span class="dot" aria-hidden="true"></span>
      <span class="text">Open the full system design scenario →</span>
      <i class="pi pi-arrow-right" aria-hidden="true"></i>
    </a>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="library-title" data-load="library">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">Question library</p>
        <h2 id="library-title">Explore the Atlas.</h2>
        <p class="muted">
          A few real prompts from the workspace. Solve in the tech you pick; each ships with starters and checks.
        </p>
      </div>

      <a class="sk-btn sk-btn-ghost" routerLink="/coding" aria-label="Open the full library">
        Open full library <i class="pi pi-arrow-right" aria-hidden="true"></i>
      </a>
    </div>

    <div class="library-card glass" *ngIf="sectionVisible.library; else libraryPlaceholder">
      <div class="library-highlights" role="region" aria-label="Sample questions">
        <a class="qcard" *ngFor="let q of libraryHighlights" [routerLink]="q.link">
          <div class="qtop">
            <div class="qtitle"><span class="qno">{{ q.no }}</span> {{ q.title }}</div>
            <div class="qmeta">
              <span class="qchip">{{ q.meta.difficulty }}</span>
              <span class="qchip neutral">{{ q.meta.minutes }} min</span>
            </div>
          </div>
          <div class="qdesc">{{ q.desc }}</div>
          <div class="qtags">
            <span class="qtag" *ngFor="let t of q.tags">{{ t }}</span>
          </div>
        </a>
      </div>

      <a class="demo-banner library-cta" routerLink="/coding" role="button" aria-label="Open the full library">
        <span class="dot" aria-hidden="true"></span>
        <span class="text">Open the full coding library →</span>
        <i class="pi pi-arrow-right" aria-hidden="true"></i>
      </a>
    </div>
    <ng-template #libraryPlaceholder>
      <div class="preview-placeholder">Loading library highlights…</div>
    </ng-template>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="company-title" data-load="company">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">Company practice</p>
        <h2 id="company-title">Prep with company-flavored prompts.</h2>
        <p class="muted">A few examples from company sets. UI, JS, and system slices shaped for each team’s flavor.</p>
      </div>
      <a class="sk-btn sk-btn-ghost" routerLink="/companies" aria-label="Browse company sets">
        Browse companies <i class="pi pi-arrow-right" aria-hidden="true"></i>
      </a>
    </div>

    <div class="company-grid" *ngIf="sectionVisible.company; else companyPlaceholder">
      <article class="company-card glass" *ngFor="let c of companyQuestions">
        <div class="company-logo" [style.background]="c.color" [attr.data-slug]="c.slug">
          <span aria-hidden="true">{{ c.icon }}</span>
          <span class="sr-only">{{ c.name }}</span>
        </div>
        <div class="company-meta">
          <div class="company-name">{{ c.name }}</div>
          <div class="company-note">{{ c.note }}</div>
        </div>
        <div class="company-meta-right">
          <ng-container *ngIf="companyCounts$ && (companyCounts$ | async) as cc">
            <span class="company-count" *ngIf="cc[c.slug]">{{ cc[c.slug].all }} questions</span>
          </ng-container>
          <a class="company-link" [routerLink]="c.link">
            View {{ c.name }} preview <i class="pi pi-arrow-right" aria-hidden="true"></i>
          </a>
        </div>
      </article>
    </div>
    <ng-template #companyPlaceholder>
      <div class="preview-placeholder">Loading company sets…</div>
    </ng-template>
  </div>
</section>

<section class="section reveal cap-section" #observeSection aria-labelledby="capabilities-title" data-load="capabilities">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">What makes FrontendAtlas different</p>
        <h2 id="capabilities-title">Crafted for front-end engineers.</h2>
      </div>
      <p class="muted">High-signal depth, not filler. Each tile maps to a capability inside the FrontendAtlas
        workspace.</p>
    </div>

    <div class="cap-grid" *ngIf="sectionVisible.capabilities; else capabilitiesPlaceholder">
      <article class="cap-card glass" *ngFor="let cap of capabilities; let i = index" [attr.data-icon]="cap.icon"
        [style.animationDelay]="(i * 60) + 'ms'">
        <div class="cap-icon" aria-hidden="true"></div>
        <h3>{{ cap.title }}</h3>
        <p>{{ cap.copy }}</p>
      </article>
    </div>
    <ng-template #capabilitiesPlaceholder>
      <div class="preview-placeholder">Loading capabilities…</div>
    </ng-template>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="tracks-title" data-load="tracks">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">Tracks</p>
        <h2 id="tracks-title">Pick your lane.</h2>
      </div>
      <p class="muted">Built for progression: the brief stays premium while the scaffolding evolves.</p>
    </div>

    <div class="track-grid" *ngIf="sectionVisible.tracks; else tracksPlaceholder">
      <article class="track-card glass" *ngFor="let track of tracks; let i = index">
        <header>
          <span class="pill">{{ track.name }}</span>
          <span class="meta">Series {{ i + 1 }}</span>
        </header>
        <ul>
          <li *ngFor="let bullet of track.bullets">{{ bullet }}</li>
        </ul>
      </article>
    </div>
    <ng-template #tracksPlaceholder>
      <div class="preview-placeholder">Loading track highlights…</div>
    </ng-template>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="pricing-title">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">Pricing</p>
        <h2 id="pricing-title">Choose the plan that fits your prep.</h2>
      </div>
      <p class="muted">All plans unlock the core practice loop — code, preview, test, and review.</p>
    </div>
  </div>

  <app-pricing-plans-section
    variant="compact"
    [paymentsEnabled]="paymentsEnabled"
    [checkoutUrls]="checkoutUrls"
    analyticsSource="showcase_pricing"
    ctaMode="navigatePricing">
  </app-pricing-plans-section>
</section>

<section class="section reveal" #observeSection aria-labelledby="faq-title" data-load="faq">
  <div class="shell">
    <ng-container *ngIf="sectionVisible.faq; else faqPlaceholder">
      <app-faq-section
        id="faq-title"
        eyebrow="FAQ"
        title="Common questions, answered."
        subtitle="Short, direct answers. If you still have questions, you can link to /guides or /contact."
        [groups]="faqGroups"
        [singleOpen]="true">
      </app-faq-section>
    </ng-container>
    <ng-template #faqPlaceholder>
      <div class="preview-placeholder">Loading FAQ…</div>
    </ng-template>

    <div class="faq-cta">
      <a class="sk-btn sk-btn-ghost tiny" routerLink="/pricing" aria-label="View the full FAQ">
        View full FAQ
      </a>
    </div>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="contact-title" data-load="contact">
  <div class="shell">
    <div class="section-head">
      <div>
        <p class="eyebrow">Contact</p>
        <h2 id="contact-title">Still have a question?</h2>
      </div>
      <p class="muted">
        If the FAQ didn’t cover it, reach out. We read every message.
      </p>
    </div>

    <div class="contact-card glass" *ngIf="sectionVisible.contact; else contactPlaceholder">
      <div class="contact-copy">
        <div class="contact-pills" aria-label="Contact options">
          <form class="contact-form" (ngSubmit)="submitContact()" #f="ngForm" novalidate>
            <div class="contact-form-row">
              <label class="contact-label">
                <span>Name</span>
                <input class="contact-input" name="name" [(ngModel)]="contact.name" required autocomplete="name"
                  placeholder="Your name" />
              </label>

              <label class="contact-label">
                <span>Email</span>
                <input class="contact-input" name="email" [(ngModel)]="contact.email" required email
                  autocomplete="email" placeholder="you@company.com" />
              </label>
            </div>

            <div class="contact-form-row">
              <label class="contact-label">
                <span>Topic</span>
                <select class="contact-input" name="topic" [(ngModel)]="contact.topic">
                  <option value="general">General</option>
                  <option value="billing">Billing</option>
                  <option value="bug">Bug report</option>
                  <option value="feature">Feature request</option>
                </select>
              </label>
            </div>

            <label class="contact-label">
              <span>Message</span>
              <textarea class="contact-textarea" name="message" [(ngModel)]="contact.message" required rows="5"
                placeholder="What can we help with? Include URL + screenshot if it’s a bug."></textarea>
            </label>

            <div class="contact-form-actions">
              <button type="submit" class="sk-btn sk-btn-primary" [disabled]="f.invalid || contactSubmitting">
                <i class="pi pi-send" aria-hidden="true"></i>
                <span>Send message</span>
              </button>

              <div class="contact-actions-note muted">
                This opens your email client.
              </div>
            </div>
            <div class="contact-shortcuts" aria-label="Quick links">
              <a class="contact-pill" routerLink="/guides" aria-label="Open guides">
                <i class="pi pi-book" aria-hidden="true"></i>
                <span>Guides</span>
              </a>

              <a class="contact-pill" routerLink="/pricing" aria-label="View pricing plans">
                <i class="pi pi-tag" aria-hidden="true"></i>
                <span>Pricing plans</span>
              </a>
            </div>
          </form>
        </div>

        <p class="contact-meta">
          Typical response: <strong>1–2 business days</strong>.
        </p>
      </div>

      <div class="contact-side" aria-hidden="true">
        <div class="contact-badge">
          <div class="badge-dot"></div>
          <div class="badge-title">Support</div>
          <div class="badge-sub">Product · Billing · Bugs</div>
        </div>

        <div class="contact-note">
          Prefer reporting bugs?
          <span class="muted">Use the contact page and include a screenshot + URL.</span>
        </div>
      </div>
    </div>
    <ng-template #contactPlaceholder>
      <div class="preview-placeholder">Loading contact form…</div>
    </ng-template>
  </div>
</section>

<section class="section reveal" #observeSection aria-labelledby="cta-title">
  <div class="shell">
    <div class="cta-card glass">
      <div>
        <p class="eyebrow">Final step</p>
        <h2 id="cta-title">Try the playground with your own prompts.</h2>
        <p class="muted">Open the playground, ship code, and let the tests push back.</p>
      </div>
      <div class="cta-actions">
        <a class="sk-btn sk-btn-primary" routerLink="/auth/signup">Start free preview</a>
        <a class="sk-btn sk-btn-ghost" routerLink="/guides">View interview blueprint</a>
      </div>
    </div>
  </div>
</section>
