:host {
  display: block;
  height: 100%;
  min-height: 0;
  min-width: 0;
}

.coding-detail {
  background: var(--uf-bg);
  color: var(--uf-text-primary);
  height: 100%;
  min-height: 0;
  align-items: stretch;
}

.coding-detail aside {
  background: var(--uf-surface);
  border: 1px solid var(--uf-border-subtle);
  border-radius: var(--uf-card-radius);
  box-shadow: var(--uf-card-shadow);
}

.coding-detail main {
  background: var(--uf-surface-alt);
  border: 1px solid var(--uf-border-subtle);
  border-radius: var(--uf-card-radius);
  box-shadow: var(--uf-card-shadow);
}

.detail-title-row {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.detail-solved {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: var(--uf-radius-pill);
  background: var(--uf-accent-soft);
  color: var(--uf-text-primary);
  border: 1px solid color-mix(in srgb, var(--uf-accent) 70%, var(--uf-border-subtle) 30%);
  font-weight: 700;
  font-size: 12px;
}

.detail-solved .pi {
  font-size: 12px;
}

.report-issue-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  height: 34px;
  padding: 0 12px;
  margin-left: auto;
  border-radius: var(--uf-radius-pill);
  border: 1px solid color-mix(in srgb, var(--uf-border-subtle) 70%, var(--uf-text-secondary) 30%);
  background: color-mix(in srgb, var(--uf-text-primary) 4%, transparent);
  color: var(--uf-text-primary);
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: border-color .16s ease, background-color .16s ease, color .16s ease, transform .08s ease;
}

.report-issue-btn:hover {
  border-color: color-mix(in srgb, var(--uf-accent) 45%, var(--uf-border-subtle));
  background: color-mix(in srgb, var(--uf-accent) 12%, var(--uf-surface));
}

.report-issue-btn:active {
  transform: translateY(1px);
}

.report-issue-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--uf-accent) 55%, transparent);
}

.report-issue-btn .pi {
  font-size: 12px;
}

.detail-prep-bridge {
  margin-top: 14px;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid var(--uf-border-subtle);
  background: color-mix(in srgb, var(--uf-text-primary) 4%, var(--uf-surface));
  display: grid;
  gap: 10px;
}

.detail-prep-bridge__text {
  margin: 0;
  font-size: 13px;
  line-height: 1.5;
  color: color-mix(in srgb, var(--uf-text-secondary) 86%, transparent);
}

.detail-prep-bridge__links {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.detail-prep-bridge__links a {
  display: inline-flex;
  align-items: center;
  min-height: 30px;
  padding: 0 12px;
  border-radius: var(--uf-radius-pill);
  border: 1px solid var(--uf-border-subtle);
  background: color-mix(in srgb, var(--uf-text-primary) 6%, var(--uf-surface));
  color: var(--uf-text-secondary);
  text-decoration: none;
  font-size: 12px;
  font-weight: 600;
  transition: border-color 160ms ease, color 160ms ease;
}

.detail-prep-bridge__links a:hover {
  border-color: color-mix(in srgb, var(--uf-border-subtle) 60%, var(--uf-accent) 40%);
  color: var(--uf-text-primary);
}

/* ---------- Monaco: never overflow horizontally ---------- */
:host ::ng-deep .monaco-editor,
:host ::ng-deep .monaco-editor .overflow-guard { max-width: 100% !important; width: 100% !important; }
:host ::ng-deep .monaco-editor .editor-scrollable { overflow-x: hidden !important; }
:host ::ng-deep .monaco-editor .view-lines { font-size: 12px !important; line-height: 18px !important; }

.lite-code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: 12px;
  line-height: 1.5;
  color: var(--uf-text-primary);
  background: color-mix(in srgb, var(--uf-surface) 92%, var(--uf-surface-alt));
  border: 1px solid var(--uf-border-subtle);
  border-radius: 12px;
  padding: 12px 14px;
  white-space: pre-wrap;
  word-break: break-word;
  margin: 0;
}

/* ---------- Rich text / prose base ---------- */
:host ::ng-deep .prose { color:#e5e7eb; }
:host ::ng-deep .prose h1, 
:host ::ng-deep .prose h2, 
:host ::ng-deep .prose h3 { font-weight:600; line-height:1.25; margin:.75rem 0 .5rem; }
:host ::ng-deep .prose p { margin:0 0 .5rem 0; }
:host ::ng-deep .prose ul { list-style:disc; margin:.25rem 0 .5rem 1.25rem; }
:host ::ng-deep .prose ol { list-style:decimal; margin:.25rem 0 .5rem 1.25rem; }
:host ::ng-deep .prose a { text-decoration:underline; }
:host ::ng-deep .prose code {
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  padding: .05rem .3rem;
  border-radius: .25rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
  font-size: .85em; /* will be additionally reduced below via .85em*.85em */
}

/* inline code chips (also outside .prose, e.g., in Overview) */
:host ::ng-deep code { padding:0 3px; border-radius:4px; background:rgba(125,125,125,.15); }

/* ---------- Layout guards ---------- */
.coding-detail .min-w-0, .coding-detail .flex-1 { min-width: 0; }
.fixed-under-header {
  position:fixed;
  top:var(--app-safe-top,64px);
  right:0;
  left:0;
  bottom:56px;
  overflow:hidden;
}
.coding-detail__scroll {
  height: 100%;
  overflow: auto;
  padding-bottom: 120px; /* leave room above footer bar */
}
.coding-detail.demo-embed {
  position: relative;
  height: 100%;
  min-height: 0;
  overflow: hidden;
  display: flex;
  align-items: stretch;
}
.coding-detail.demo-embed .coding-detail__scroll {
  padding-bottom: 0;
  height: 100%;
  overflow: auto;
}
.coding-detail.demo-embed aside,
.coding-detail.demo-embed main {
  height: 100%;
  min-height: 0;
}
.coding-detail.demo-embed main { background: var(--uf-surface); }
.coding-detail.demo-embed .flex.gap-\[5px\] { height: 100%; }
.coding-detail.demo-embed aside {
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.monaco-preload {
  position: absolute;
  width: 1px;
  height: 1px;
  opacity: 0;
  pointer-events: none;
  left: -9999px;
  top: -9999px;
}

@media (max-width: 820px) {
  .coding-detail.demo-embed { min-height: 600px; }
}

.demo-cta-bar{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:12px;
  padding:12px 16px;
  border-top:1px solid var(--uf-border-subtle);
  background: color-mix(in srgb, var(--uf-surface) 90%, var(--uf-text-primary) 4%);
}

.coding-detail-skeleton {
  margin: 24px;
  padding: 24px;
  border-radius: var(--uf-card-radius);
  background: var(--uf-surface);
  border: 1px solid var(--uf-border-subtle);
  box-shadow: var(--uf-card-shadow);
}

.coding-detail-skeleton__title {
  height: 20px;
  width: 60%;
  border-radius: 999px;
  background: color-mix(in srgb, var(--uf-border-subtle) 60%, transparent);
  margin-bottom: 12px;
}

.coding-detail-skeleton__line {
  height: 12px;
  width: 100%;
  border-radius: 999px;
  background: color-mix(in srgb, var(--uf-border-subtle) 50%, transparent);
  margin-bottom: 10px;
}

.coding-detail-empty {
  text-align: center;
  padding: 32px 0;
}

.coding-detail-empty__text {
  color: var(--uf-text-secondary);
  font-size: 14px;
}

.preview-only-shell {
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(circle at 20% 20%, color-mix(in srgb, var(--uf-accent) 12%, transparent), transparent 40%),
    color-mix(in srgb, var(--uf-surface) 92%, var(--uf-bg));
}

.preview-only-loading {
  position: absolute;
  inset: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  background: color-mix(in srgb, var(--uf-surface) 88%, rgba(5, 10, 20, 0.32));
  color: var(--uf-text-primary);
}

.preview-only-loading > i {
  font-size: 1.05rem;
  color: color-mix(in srgb, var(--uf-accent) 80%, #9ed6ff 20%);
}

.preview-only-loading__copy {
  display: grid;
  gap: 2px;
}

.preview-only-loading__title {
  font-size: 0.95rem;
  font-weight: 650;
  letter-spacing: 0.01em;
}

.preview-only-loading__sub {
  font-size: 0.82rem;
  color: var(--uf-text-secondary);
}

.preview-only-frame {
  display: block;
  opacity: 1;
  transition: opacity 140ms ease;
}

.preview-only-frame.preview-only-frame--loading {
  opacity: 0;
}

/* Mobile coding workspace guard */
.mobile-workspace-shell {
  min-height: calc(100vh - var(--app-safe-top, 64px) - 24px);
  min-height: calc(100dvh - var(--app-safe-top, 64px) - 24px);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 24px 14px 28px;
  overflow: auto;
}

.mobile-workspace-card {
  width: min(560px, 100%);
  border-radius: 16px;
  border: 1px solid var(--uf-border-subtle);
  background: color-mix(in srgb, var(--uf-surface) 90%, var(--uf-text-primary) 10%);
  box-shadow: var(--uf-card-shadow-strong);
  padding: 20px 18px;
  display: grid;
  gap: 12px;
}

.mobile-workspace-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: fit-content;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--uf-accent) 55%, var(--uf-border-subtle));
  background: color-mix(in srgb, var(--uf-accent) 18%, transparent);
  color: var(--uf-text-primary);
  font-size: 11px;
  font-weight: 800;
  letter-spacing: .05em;
  text-transform: uppercase;
}

.mobile-workspace-title {
  margin: 0;
  font-size: 20px;
  font-weight: 800;
  line-height: 1.3;
  color: var(--uf-text-primary);
}

.mobile-workspace-copy {
  margin: 0;
  font-size: 14px;
  line-height: 1.55;
  color: color-mix(in srgb, var(--uf-text-secondary) 90%, transparent);
}

.mobile-workspace-list {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 6px;
  font-size: 13px;
  line-height: 1.5;
  color: color-mix(in srgb, var(--uf-text-secondary) 86%, transparent);
}

.mobile-workspace-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

@media (max-width: 520px) {
  .mobile-workspace-title { font-size: 18px; }
  .mobile-workspace-actions .fa-btn {
    flex: 1 1 100%;
    justify-content: center;
  }
}

.demo-cta-btn{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-radius:10px;
  border:1px solid var(--uf-border-subtle);
  background: color-mix(in srgb, var(--uf-accent) 14%, var(--uf-surface));
  color: #050607;
  font-weight: 700;
  text-decoration: none;
  box-shadow: 0 10px 28px rgba(244,193,93,.2);
}
.demo-cta-btn:hover{ filter: brightness(1.05); }

/* ---------- Tabs / header micro-polish ---------- */
.coding-detail .flex.items-center.border-b .px-4.py-2 { padding:.5rem .75rem; }
.coding-detail select { 
  appearance: none;
  background:#1f2937; 
  border:1px solid rgba(255,255,255,.10);
  color:#e5e7eb; 
  border-radius:6px; 
  padding:.25rem .5rem; 
  font-size:.75rem; 
  line-height:1rem;
}
.coding-detail select:focus { outline: none; border-color:#60a5fa; box-shadow:0 0 0 2px rgba(96,165,250,.25); }

/* ---------- Splitters ---------- */
.splitter{ width:5px; background:transparent; border-radius:25px; cursor:col-resize; transition:background-color .15s; }
.splitter:hover, .splitter.dragging{ background-color:#3b82f6; }
.horizontal-splitter{ height:5px; z-index:2; background:transparent; border-radius:25px; cursor:row-resize; user-select:none; transition:background-color .15s; }
.horizontal-splitter:hover, .horizontal-splitter.dragging{ background-color:#3b82f6; }

/* ---------- Notes & Pitfalls tiles ---------- */
.coding-detail .grid.md\:grid-cols-3.gap-3 { align-items: stretch; }
.coding-detail .grid.md\:grid-cols-3.gap-3 > div {
  background: rgba(255,255,255,.02);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 10px;
  min-height: 100%;
}
.coding-detail .grid.md\:grid-cols-3.gap-3 > div .text-xs.uppercase { 
  letter-spacing:.06em; 
  font-weight:700; 
  color:#cbd5e1; 
}
.coding-detail .grid.md\:grid-cols-3.gap-3 > div ul { margin:.25rem 0 0 0; padding-left:1rem; }
.coding-detail .grid.md\:grid-cols-3.gap-3 > div li { margin:.25rem 0; }



/* ---------- Warning + banners ---------- */
.solution-warning { font-size:13px; padding:1rem; }
.icon-warning { display:grid; place-items:center; width:32px; height:32px; border-radius:9999px;
  background:rgba(250,204,21,.08); border:1px solid rgba(250,204,21,.25); }
.icon-warning i { font-size:16px; color:#facc15; }

.fa-chip{ display:inline-flex; align-items:center; padding:2px 6px; border-radius:6px; font-size:10px; line-height:1; opacity:.8; border:1px solid rgba(255,255,255,.12); }

/* ---------- Tiny icon button ---------- */
.icon-btn{ display:inline-grid; place-items:center; width:28px; height:28px; border-radius:6px; background:transparent; border:1px solid rgba(255,255,255,.12); color:#e5e7eb; transition:background .15s ease, border-color .15s ease, transform .02s ease; }
.icon-btn i{ font-size:12px; }
.icon-btn:hover{ background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.2); }
.icon-btn:active{ transform:translateY(1px); }

/* ---------- Notes & Pitfalls: single column ---------- */
.coding-detail .grid.md\:grid-cols-3.gap-3 {
  grid-template-columns: 1fr !important;
  gap: .75rem;
}
.coding-detail .grid.md\:grid-cols-3.gap-3 > div {
  width: 100%;
  background: rgba(255,255,255,.02);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 10px;
}

/* ---------- Approach header layout ---------- */
.ap-head {
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: start;
  gap: .5rem;
  margin-bottom: .25rem;
}
.ap-num {
  display: inline-grid;
  place-items: center;
  min-width: 24px;
  height: 24px;
  font-size: 12px;
  border-radius: 6px;
  background: rgba(255,255,255,.10);
}
.ap-title { font-size: 1rem; line-height: 1.35; font-weight: 600; margin: 0; white-space: normal; }

/* ---------- Code block styling / copy button ---------- */
.code-wrap { position: relative; }
.copy-fab {
  position: absolute;
  top: 8px; right: 8px;
  width: 34px; height: 34px;
  border-radius: 9999px;
  display: inline-grid; place-items: center;
  background: rgba(0,0,0,.35);
  border: 1px solid rgba(255,255,255,.35);
  color: #fff;
  opacity: 0; transform: scale(.96);
  transition: opacity .15s ease, transform .15s ease, background .15s ease, border-color .15s ease;
}
.code-wrap:hover .copy-fab { opacity: 1; transform: scale(1); }
.copy-fab:hover { background: rgba(255,255,255,.12); border-color: rgba(255,255,255,.5); }
.copy-fab:active { transform: scale(.98); }
@media (hover: none) { .copy-fab { opacity: 1; } }
.copy-fab.copied, .copy-fab i.pi-check { filter: drop-shadow(0 0 6px rgba(34,197,94,.45)); }

/* ---------- Approach row grid ---------- */
.ap-row {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: .5rem;
  margin-bottom: 1.25rem;
}
.ap-actions { justify-self: end; }
@media (max-width: 640px) {
  .ap-row { grid-template-columns: auto 1fr; }
  .ap-actions { grid-column: 1 / -1; margin-top: .25rem; }
}
.ap-row + .prose { margin-top: .5rem; }
.ap-row + .code-wrap { margin-top: .5rem; }

/* ===== Unified reading size for Description & Solution (calmer) ===== */
:host {
  --fa-body: 14px;
  --fa-leading: 1.55;
}
.font-sm {
  font-size: var(--fa-body);
  line-height: var(--fa-leading);
  color: #e6e6e6;
}

/* Ensure Tailwind's .prose inherits our sizes */
:host ::ng-deep .prose{ font-size: inherit; line-height: inherit; }
/* Inline code a touch smaller for contrast */
:host ::ng-deep .prose code{ font-size: .85em; }
/* Slightly tighter vertical rhythm for stacked sections */
.coding-detail .space-y-4 > * + *{ margin-top: 20px; }

:host ::ng-deep .editor-fill,
:host ::ng-deep .editor-fill > div,             /* wrapper root */
:host ::ng-deep .editor-fill .monaco-editor,
:host ::ng-deep .editor-fill .monaco-editor .overflow-guard {
  height: 100% !important;
  max-height: 100% !important;
}

/* ----- Solution files tabs (GreatFrontEnd-style) ----- */
.solution-files-tabs {
  display: flex;
  gap: 6px;
  padding: 2px 2px 6px;
  margin: 0 -2px;
  overflow-x: auto;
  overscroll-behavior-x: contain;
  scrollbar-width: thin;
}

.solution-files-tabs::-webkit-scrollbar {
  height: 4px;
}
.solution-files-tabs::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 253, 0.35);
  border-radius: 9999px;
}

/* File pills */
.sol-file-tab {
  flex: 0 0 auto;
  padding: 4px 10px;
  font-size: 11px;
  line-height: 1.4;
  border-radius: 9999px;
  border: 1px solid rgba(148, 163, 253, 0.12);
  background: rgba(15, 23, 42, 0.96);
  color: #9ca3af;
  cursor: pointer;
  white-space: nowrap;
  transition:
    background-color 0.15s ease,
    border-color 0.15s ease,
    color 0.15s ease,
    transform 0.05s ease;
}

.sol-file-tab:hover {
  background: rgba(30, 64, 175, 0.35);
  border-color: rgba(129, 140, 248, 0.7);
  color: #e5e7eb;
}

.sol-file-tab.active {
  background: #111827;
  color: #f9fafb;
  border-color: #6366f1;
  box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.3);
  transform: translateY(-1px);
}

/* Premium lock state */
.locked-shell{
  height: calc(100vh - var(--app-safe-top, 64px) - 56px);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 32px 16px 64px;
  overflow: auto;
}
.locked-card{
  max-width: 520px;
  width: min(520px, 100%);
  padding: 24px;
  border-radius: 16px;
  border: 1px solid var(--uf-border-subtle);
  background: color-mix(in srgb, var(--uf-surface) 92%, var(--uf-text-primary) 8%);
  box-shadow: var(--uf-card-shadow);
  text-align: center;
  display: grid;
  gap: 12px;
}
.locked-pill{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 12px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--uf-accent) 25%, transparent);
  color: var(--uf-text-primary);
  font-weight: 800;
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin: 0 auto;
}
.locked-title{
  margin: 4px 0 0;
  font-size: 22px;
  letter-spacing: -0.01em;
}
.locked-meta{
  font-size: 12px;
  color: color-mix(in srgb, var(--uf-text-secondary) 88%, transparent);
}
.locked-copy{
  margin: 0;
  color: color-mix(in srgb, var(--uf-text-secondary) 88%, transparent);
  font-size: 14px;
  line-height: 1.55;
}
.locked-persona{
  margin: 0;
  font-size: 12px;
  color: color-mix(in srgb, var(--uf-text-secondary) 84%, transparent);
  font-weight: 600;
}
.locked-preview{
  text-align: left;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid var(--uf-border-subtle);
  background: color-mix(in srgb, var(--uf-surface) 94%, var(--uf-text-primary) 6%);
  display: grid;
  gap: 8px;
}
.locked-preview__summary{
  margin: 0;
  color: var(--uf-text-primary);
  font-size: 14px;
  line-height: 1.5;
}
.locked-preview__list{
  margin: 0;
  padding-left: 18px;
  color: color-mix(in srgb, var(--uf-text-secondary) 88%, transparent);
  font-size: 13px;
  line-height: 1.45;
}
.locked-preview__list li{
  margin: 0 0 4px;
}
.locked-paths{
  display: grid;
  gap: 8px;
  text-align: left;
}
.locked-paths__item{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  border: 1px solid var(--uf-border-subtle);
  border-radius: 10px;
  padding: 9px 10px;
  text-decoration: none;
  color: var(--uf-text-primary);
  background: color-mix(in srgb, var(--uf-surface) 90%, transparent);
  font-size: 12px;
  font-weight: 700;
}
.locked-paths__item:hover{
  border-color: color-mix(in srgb, var(--uf-accent) 45%, var(--uf-border-subtle));
}
.locked-paths__item i{
  color: var(--uf-accent);
  font-size: 12px;
}
.locked-actions{
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 6px;
}

@media (max-width: 768px) {
  .report-issue-btn {
    width: 34px;
    padding: 0;
    justify-content: center;
  }

  .report-issue-btn__label {
    display: none;
  }
}
