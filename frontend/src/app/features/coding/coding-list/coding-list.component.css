:host {
  /* ===== Palette (System Design page-matched) ===== */
  --surface-0: #0f0f10;                 /* app bg (page) */
  --surface-1: #121213;                 /* panels / rows */
  --surface-2: #101011;                 /* deeper panel */
  --grad-1:   #141414;
  --grad-2:   #101010;

  --border-weak:   rgba(255,255,255,.10);
  --border:        rgba(255,255,255,.14);
  --border-strong: rgba(255,255,255,.20);

  --ink:      #e8eaee;                  /* primary text */
  --ink-sub:  rgba(255,255,255,.78);
  --ink-dim:  rgba(255,255,255,.62);

  --chip-bg:    rgba(255,255,255,.04);
  --chip-hover: rgba(255,255,255,.06);
  --chip-press: rgba(255,255,255,.08);

  --accent:        rgba(255,255,255,.22); /* neutral accent */
  --link:          #cfd6e2;

  /* Active/focus visuals */
  --chip-active:   rgba(255,255,255,.16);
  --accent-strong: rgba(255,255,255,.38);
  --ring:          rgba(255,255,255,.22);
  --ring-soft:     rgba(255,255,255,.10);
}

:host { display:block; color: var(--ink); }

/* ------------------------------
   PAGE HEADING
   ------------------------------ */
h1 { color: var(--ink); }

/* ------------------------------
   LIST CONTAINER + ROWS
   ------------------------------ */
.list {
  background: linear-gradient(180deg, var(--grad-1), var(--grad-2));
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.list-row {
  background: var(--surface-1);
  border-bottom: 1px solid var(--border-weak);
  transition: background-color .15s ease, border-color .15s ease;
}
.list-row:hover {
  background: var(--chip-hover);
  border-color: var(--border);
}
.list-row:last-child { border-bottom: 0; }

.text-gray-400 { color: var(--ink-dim) !important; }  /* description line */
.text-blue-400 { color: var(--link) !important; }
.text-blue-400:hover { color: #ffffff !important; }

/* ------------------------------
   FILTER BAR
   ------------------------------ */
.filter-bar {
  font-size: 14px;
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: 12px;
}
@media (min-width: 768px) {
  .filter-bar .section:not(:first-child) {
    border-left: 2px solid var(--border);
    padding-left: 16px;
  }
}

/* search input */
.filter-bar input[pInputText] {
  background: #0f0f10 !important;
  border: 1px solid var(--border-weak) !important;
  color: var(--ink) !important;
}
.filter-bar input[pInputText]:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px var(--chip-hover);
  border-color: var(--border) !important;
}

/* ------------------------------
   KIND / TECH PILLS
   ------------------------------ */
.tabs-row { display:flex; align-items:center; justify-content: space-between; width:100%; margin-bottom: 1.5rem; }

.tabs-left {
  display: inline-flex;
  gap: 6px;
  padding: 4px;
  border: 1px solid var(--border);
  background: var(--chip-bg);
  border-radius: 9999px;
}

.kind-pill, .tab-pill {
  position: relative;                         /* for active dot */
  display: inline-flex; align-items:center; gap: 8px;
  padding: 6px 12px;
  border-radius: 9999px;
  font-size: 14px; line-height: 1;            /* lock typography */
  font-weight: 500;
  color: var(--ink-sub);
  border: 1px solid var(--border);            /* transparent border would still take space; we use real border */
  background: var(--chip-bg);
  text-decoration: none;
  transition: background-color .15s ease, border-color .15s ease, color .15s ease, transform .06s ease, box-shadow .15s ease;
}
.kind-pill--idle:hover, .tab-pill--idle:hover { background: var(--chip-hover); color:#fff; }
.kind-pill:active, .tab-pill:active { transform: scale(.98); }

/* Reserve space for the active dot so width never changes */
.kind-pill, .tab-pill { padding-left: 20px; }

.kind-pill--active, .tab-pill--active {
  background: var(--chip-active);
  border-color: var(--accent-strong);
  color: #fff;
  box-shadow:
    0 0 0 2px var(--ring-soft) inset,
    0 0 0 1.5px var(--ring);
}

/* keyboard focus */
.kind-pill:focus-visible,
.tab-pill:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--ring),
    0 0 0 4px rgba(0,0,0,.25);
}

/* Active dot (absolute so it doesn't push text) */
.kind-pill--active::before,
.tab-pill--active::before {
  content: '';
  position: absolute;
  left: 8px; top: 50%;
  width: 6px; height: 6px; border-radius: 999px;
  transform: translateY(-50%);
  background: #fff; opacity: .9;
}

/* Tech badge layout + brand colors */
.tech-badge {
  width: 24px; height: 24px;
  display: grid; place-items: center;
  border-radius: 6px;
  font-weight: 700; font-size: 10px;
  border: 1px solid var(--border);
}
.tech-js      { background:#F7DF1E; color:#111;  border-color: rgba(247,223,30,.35); }
.tech-react   { background:#61DAFB; color:#0b0d10; border-color: rgba(97,218,251,.35); }
.tech-angular { background:#DD0031; color:#fff;  border-color: rgba(221,0,49,.45); }
.tech-vue     { background:#42B883; color:#0b0d10; border-color: rgba(66,184,131,.35); }
.tech-html    { background:#F16529; color:#fff;  border-color: rgba(241,101,41,.40); }
.tech-css     { background:#2965F1; color:#fff;  border-color: rgba(41,101,241,.40); }

.tab-pill--active .tech-badge { box-shadow: 0 0 0 1px rgba(255,255,255,.18) inset; }

/* right-side count chip */
.count-chip {
  white-space: nowrap;
  display: inline-block;
  padding: 6px 10px;
  border-radius: 9999px;
  font-size: 13px; line-height: 1;
  color: var(--ink-sub);
  background: var(--chip-bg);
  border: 1px solid var(--border);
}
.count-chip.active { border-color: var(--accent-strong); box-shadow: 0 0 0 1.5px var(--ring); }

/* ------------------------------
   DIFFICULTY / IMPORTANCE GROUPS
   ------------------------------ */
.diff-group {
  display:flex; align-items:center; gap:8px;
  padding: 4px 8px;
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: 10px;
}

.diff-legend {
  margin-right: 6px; font-size: 12px; color: var(--ink-dim); letter-spacing: .2px; white-space: nowrap;
}

/* Give idle option a transparent border so checked state doesn't grow */
.diff-option {
  display:inline-flex; align-items:center; gap:6px;
  padding: 6px 10px; border-radius:9999px;
  color: var(--ink-sub); cursor:pointer; user-select:none;
  transition: background .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease;
  border: 1px solid transparent;                 /* prevents size jump */
  font-size: 12px; line-height: 1;               /* locked type */
}
.diff-option:hover { background: var(--chip-hover); }

/* custom checkbox */
.diff-option input[type='checkbox']{
  appearance:none; width:14px; height:14px; border-radius:4px;
  border:1px solid var(--border-strong); background:#0e0e0f; cursor:pointer; margin:0;
  transition:all .15s ease; position:relative;
}
.diff-option input[type='checkbox']:hover { border-color: var(--border); background:#121214; }
.diff-option input[type='checkbox']:checked {
  border-color: var(--accent-strong); background: #1b1b1d;
}
.diff-option input[type='checkbox']:checked::after{
  content:'âœ“'; position:absolute; top:50%; left:50%; transform:translate(-50%,-55%);
  font-size:11px; color:#f1f5f9;
}

.diff-option--checked {
  border-color: var(--accent-strong);
  background: var(--chip-active);
  color: #ffffff;
  box-shadow:
    0 0 0 2px var(--ring-soft) inset,
    0 0 0 1.5px var(--ring);
}

/* ------------------------------
   ROW CHIPS (difficulty + importance)
   ------------------------------ */
.list-row .bg-green-800,
.list-row .bg-yellow-800,
.list-row .bg-red-800 {
  background: var(--chip-bg) !important;
  border: 1px solid var(--border) !important;
  color: var(--ink-sub) !important;
  padding: 1px 6px !important;
  font-size: 11px !important; line-height: 1 !important;
  border-radius: 6px !important;
}

.imp-chip {
  display:inline-block; padding:2px 8px; font-size:12px; line-height: 1;
  border-radius:9999px;
  border:1px solid var(--border); color: var(--ink-sub); background: var(--chip-bg);
}
.imp-low    { border-color: rgba(16,185,129,.24);  background: rgba(16,185,129,.10); }
.imp-medium { border-color: rgba(245,158,11,.24);  background: rgba(245,158,11,.10); }
.imp-high   { border-color: rgba(239,68,68,.24);   background: rgba(239,68,68,.10); }

/* ------------------------------
   PRIME NG TAG CHIPS (compact)
   ------------------------------ */
:host ::ng-deep .p-chip.custom-chip {
  height: 20px !important;
  padding: 0 8px !important;
  border-radius: 9999px !important;
  background: var(--chip-bg) !important;
  border: 1px solid var(--border) !important;
  color: var(--ink-sub) !important;
}
:host ::ng-deep .p-chip.custom-chip .p-chip-text {
  font-size: 12px !important; line-height: 18px !important; color: var(--ink-sub) !important;
}
:host ::ng-deep .p-chip.custom-chip .p-chip-icon,
:host ::ng-deep .p-chip.custom-chip .p-chip-remove-icon {
  font-size: 12px !important; color: var(--ink-dim) !important;
}

/* clickable state when tag used as filter */
:host ::ng-deep .tag-clickable { cursor:pointer; }
:host ::ng-deep .tag-clickable:hover .p-chip { background: var(--chip-hover) !important; }
:host ::ng-deep .tag-clickable.active .p-chip {
  background: var(--chip-active) !important;
  border-color: var(--accent-strong) !important;
  color: #fff !important;
  box-shadow:
    0 0 0 2px var(--ring-soft) inset,
    0 0 0 1.5px var(--ring);
}

/* chips cell spacing */
.col-span-2.flex.flex-wrap { gap: 6px !important; }

/* ------------------------------
   TAG FILTER STRIP
   ------------------------------ */
.tag-filter { margin-top: 6px; margin-bottom: 10px; }

.tag-filter__header {
  display:flex; align-items:center; justify-content:space-between; margin-bottom:6px;
}
.tag-filter__legend {
  font-size:12px; letter-spacing:.2px; color: var(--ink-dim);
  display:inline-flex; align-items:center; gap:6px;
}
.tag-filter__meta { display:inline-flex; align-items:center; gap:8px; }
.tag-filter__count { font-size:12px; color: var(--ink-dim); }

/* AND/OR button */
.tag-filter__mode {
  padding:2px 10px; font-size:12px; border-radius:9999px;
  background: var(--chip-bg); border: 1px solid var(--border);
  color: var(--ink-sub); cursor:pointer; transition: all .15s ease;
}
.tag-filter__mode:hover { background: var(--chip-hover); }
.tag-filter__mode:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--ring),
    0 0 0 4px rgba(0,0,0,.25);
}

/* tag chips in the scrolling row */
.tag-scrollbar {
  display:flex; align-items:center; gap:8px; overflow-x:auto;
  padding:8px 2px 2px; margin-top:-4px; margin-bottom:10px;
}
.tag-scroll-chip {
  flex:0 0 auto; padding:4px 10px; border-radius:9999px; font-size:12px; line-height: 1;
  background: var(--chip-bg); border:1px solid var(--border); color: var(--ink-sub);
  cursor:pointer; white-space:nowrap; transition: all .15s ease;
}
.tag-scroll-chip:hover { background: var(--chip-hover); }
.tag-scroll-chip.active {
  background: var(--chip-active);
  border-color: var(--accent-strong);
  color:#fff;
  box-shadow:
    0 0 0 2px var(--ring-soft) inset,
    0 0 0 1.5px var(--ring);
}
.tag-scroll-chip:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--ring),
    0 0 0 4px rgba(0,0,0,.25);
}

/* clear button */
.tag-clear {
  margin-left:4px; padding:4px 10px; font-size:12px; line-height: 1; border-radius:9999px;
  background: transparent; color: var(--ink-sub);
  border: 1px dashed var(--accent); transition: all .15s ease;
}
.tag-clear:hover { background: var(--chip-hover); border-style: solid; }

/* ===== Sort control ===== */
.sort-wrap { position: relative; margin-left: 10px; }
.sort-wrap.open .chevron { transform: rotate(180deg); }

.sort-btn {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 6px 10px;
  border-radius: 9999px;
  font-size: 13px; line-height: 1; font-weight: 500;
  color: var(--ink-sub);
  background: var(--chip-bg);
  border: 1px solid var(--border);
  cursor: pointer;
  transition: background .15s ease, border-color .15s ease, color .15s ease;
}
.sort-btn:hover { background: var(--chip-hover); color: #fff; }
.sort-btn:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px var(--ring),
    0 0 0 4px rgba(0,0,0,.25);
}
.sort-btn .chevron { transition: transform .15s ease; }

.sort-menu {
  position: absolute;
  right: 0; margin-top: 8px; z-index: 30;
  min-width: 260px;
  padding: 6px;
  background: var(--surface-1);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 16px 36px rgba(0,0,0,.45);
}

.sort-item {
  width: 100%;
  display: grid;
  grid-template-columns: 1fr auto auto; /* label | hint | check */
  align-items: center;
  gap: 10px;
  text-align: left;
  padding: 8px 10px;
  border-radius: 8px;
  background: transparent;
  border: 1px solid transparent;    /* prevents size jump on active */
  color: var(--ink-sub);
  font-size: 13px;
  cursor: pointer;
  transition: background .12s ease, color .12s ease, border-color .12s ease, box-shadow .12s ease;
}
.sort-item:hover { background: var(--chip-hover); color: #fff; }
.sort-item.active {
  background: var(--chip-active);
  border-color: var(--accent-strong);
  color: #fff;
  box-shadow:
    0 0 0 2px var(--ring-soft) inset,
    0 0 0 1.5px var(--ring);
}
.sort-item .kbd {
  opacity: .7; font-size: 12px;
}
.sort-item .check {
  opacity: 0; font-weight: 700; font-size: 13px;
}
.sort-item.active .check { opacity: 1; }

/* Right side of tag-filter header: selected meta + Sort */
.tag-filter__right {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

/* ensure hover element sits above the full-row anchor */
.desc-tip-target { position: relative; z-index: 20; cursor: pointer; }

/* ---------- PrimeNG tooltip restyle ---------- */
/* Scope to our specific tooltip via tooltipStyleClass="desc-tip" */
:host ::ng-deep .p-tooltip.desc-tip {
  pointer-events: none;                        /* avoids flicker */
  filter: drop-shadow(0 10px 28px rgba(0,0,0,.55));
  z-index: 9999;                               /* above row overlay */
  animation: tip-fade .14s ease-out both;
}

:host ::ng-deep .p-tooltip.desc-tip .p-tooltip-arrow {
  width: 10px; height: 10px;
  border: none;                                /* remove default borders */
  background: #2b2f38;                         /* arrow matches panel */
  transform: rotate(45deg);
  box-shadow: 0 0 0 1px rgba(255,255,255,.06), 0 8px 18px rgba(0,0,0,.35);
}

/* Prime puts directional classes on the root; nudge the arrow a bit */
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-bottom .p-tooltip-arrow { top: -5px; }
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-top    .p-tooltip-arrow { bottom: -5px; }
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-right  .p-tooltip-arrow { left: -5px; }
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-left   .p-tooltip-arrow { right: -5px; }

:host ::ng-deep .p-tooltip.desc-tip .p-tooltip-text {
  background: #2b2f38;                         /* panel bg */
  color: #e7eaf0;                              /* text */
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  padding: 12px 14px;
  font-size: 13px;
  line-height: 1.45;
  max-width: 40rem;                            /* ~640px */
  white-space: pre-wrap;                       /* keep newlines */
}

/* subtle fade/scale */
@keyframes tip-fade {
  from { opacity: 0; transform: translateY(4px) scale(.98); }
  to   { opacity: 1; transform: translateY(0)    scale(1); }
}

/* respect motion prefs */
@media (prefers-reduced-motion: reduce) {
  :host ::ng-deep .p-tooltip.desc-tip { animation: none; }
}

/* Responsive: stack header rows on small screens */
@media (max-width: 640px) {
  .tag-filter__header {
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
  }
  .tag-filter__right {
    justify-content: space-between;
  }
}
