:host {
  /* ===== Palette (System Design page-matched) ===== */
  --surface-0: #0f0f10;                 /* app bg (page) */
  --surface-1: #121213;                 /* panels / rows */
  --surface-2: #101011;                 /* deeper panel */
  --grad-1:   #141414;
  --grad-2:   #101010;

  --border-weak:   rgba(255,255,255,.10);
  --border:        rgba(255,255,255,.14);
  --border-strong: rgba(255,255,255,.20);

  --ink:      #e8eaee;                  /* primary text */
  --ink-sub:  rgba(255,255,255,.78);
  --ink-dim:  rgba(255,255,255,.62);

  --chip-bg:    rgba(255,255,255,.04);
  --chip-hover: rgba(255,255,255,.06);
  --chip-press: rgba(255,255,255,.08);

  --accent:        rgba(255,255,255,.22); /* neutral accent */
  --link:          #cfd6e2;

  /* Active/focus visuals */
  --chip-active:   rgba(255,255,255,.16);
  --accent-strong: rgba(255,255,255,.38);
  --ring:          rgba(255,255,255,.22);
  --ring-soft:     rgba(255,255,255,.10);
}

:host { display:block; color: var(--ink); }

/* ------------------------------
   PAGE HEADING
   ------------------------------ */
h1 { color: var(--ink); }

/* ------------------------------
   LIST CONTAINER + ROWS
   ------------------------------ */
.list {
  background: linear-gradient(180deg, var(--grad-1), var(--grad-2));
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.list-row {
  background: var(--surface-1);
  border-bottom: 1px solid var(--border-weak);
  transition: background-color .15s ease, border-color .15s ease;
}
.list-row:hover {
  background: var(--chip-hover);
  border-color: var(--border);
}
.list-row:last-child { border-bottom: 0; }

.text-gray-400 { color: var(--ink-dim) !important; }  /* description line */
.text-blue-400 { color: var(--link) !important; }
.text-blue-400:hover { color: #ffffff !important; }

/* ------------------------------
   ROW CHIPS (difficulty + importance)
   ------------------------------ */
.list-row .bg-green-800,
.list-row .bg-yellow-800,
.list-row .bg-red-800 {
  background: var(--chip-bg) !important;
  border: 1px solid var(--border) !important;
  color: var(--ink-sub) !important;
  padding: 1px 6px !important;
  font-size: 11px !important; line-height: 1 !important;
  border-radius: 6px !important;
}

.imp-chip {
  display:inline-block; padding:2px 8px; font-size:12px; line-height: 1;
  border-radius:9999px;
  border:1px solid var(--border); color: var(--ink-sub); background: var(--chip-bg);
}
.imp-low    { border-color: rgba(16,185,129,.24);  background: rgba(16,185,129,.10); }
.imp-medium { border-color: rgba(245,158,11,.24);  background: rgba(245,158,11,.10); }
.imp-high   { border-color: rgba(239,68,68,.24);   background: rgba(239,68,68,.10); }

/* ------------------------------
   PRIME NG TAG CHIPS (compact)
   ------------------------------ */
:host ::ng-deep .p-chip.custom-chip {
  height: 20px !important;
  padding: 0 8px !important;
  border-radius: 9999px !important;
  background: var(--chip-bg) !important;
  border: 1px solid var(--border) !important;
  color: var(--ink-sub) !important;
}
:host ::ng-deep .p-chip.custom-chip .p-chip-text {
  font-size: 12px !important; line-height: 18px !important; color: var(--ink-sub) !important;
}
:host ::ng-deep .p-chip.custom-chip .p-chip-icon,
:host ::ng-deep .p-chip.custom-chip .p-chip-remove-icon {
  font-size: 12px !important; color: var(--ink-dim) !important;
}

/* clickable state when tag used as filter */
:host ::ng-deep .tag-clickable { cursor:pointer; }
:host ::ng-deep .tag-clickable:hover .p-chip { background: var(--chip-hover) !important; }
:host ::ng-deep .tag-clickable.active .p-chip {
  background: var(--chip-active) !important;
  border-color: var(--accent-strong) !important;
  color: #fff !important;
  box-shadow:
    0 0 0 2px var(--ring-soft) inset,
    0 0 0 1.5px var(--ring);
}

/* chips cell spacing */
.col-span-2.flex.flex-wrap { gap: 6px !important; }

/* ensure hover element sits above the full-row anchor */
.desc-tip-target { position: relative; z-index: 20; cursor: pointer; }

.framework-switcher {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 8px;
  flex-wrap: wrap;
}

.fw-label {
  font-size: 12px;
  color: var(--ink-sub);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.fw-label-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.fw-hint {
  font-size: 12px;
  color: var(--ink-dim);
}

.fw-chip {
  border: 1px solid var(--border);
  background: var(--chip-bg);
  color: var(--ink-sub);
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 10px;
  cursor: pointer;
  transition: background-color .12s ease, border-color .12s ease, color .12s ease;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.fw-chip:hover {
  background: var(--chip-hover);
  border-color: var(--accent);
}

.fw-chip.active {
  background: var(--chip-active);
  border-color: var(--accent-strong);
  color: #fff;
}

.fw-chip-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.fw-chip-label {
  font-weight: 600;
}

.fw-cta {
  font-size: 11px;
  color: var(--ink-dim);
}

.fw-chip:hover .fw-cta {
  color: #fff;
}

/* ---------- PrimeNG tooltip restyle ---------- */
/* Scope to our specific tooltip via tooltipStyleClass="desc-tip" */
:host ::ng-deep .p-tooltip.desc-tip {
  pointer-events: none;                        /* avoids flicker */
  filter: drop-shadow(0 10px 28px rgba(0,0,0,.55));
  z-index: 9999;                               /* above row overlay */
  animation: tip-fade .14s ease-out both;
}

:host ::ng-deep .p-tooltip.desc-tip .p-tooltip-arrow {
  width: 10px; height: 10px;
  border: none;                                /* remove default borders */
  background: #2b2f38;                         /* arrow matches panel */
  transform: rotate(45deg);
  box-shadow: 0 0 0 1px rgba(255,255,255,.06), 0 8px 18px rgba(0,0,0,.35);
}

/* Prime puts directional classes on the root; nudge the arrow a bit */
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-bottom .p-tooltip-arrow { top: -5px; }
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-top    .p-tooltip-arrow { bottom: -5px; }
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-right  .p-tooltip-arrow { left: -5px; }
:host ::ng-deep .p-tooltip.desc-tip.p-tooltip-left   .p-tooltip-arrow { right: -5px; }

:host ::ng-deep .p-tooltip.desc-tip .p-tooltip-text {
  background: #2b2f38;                         /* panel bg */
  color: #e7eaf0;                              /* text */
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  padding: 12px 14px;
  font-size: 13px;
  line-height: 1.45;
  max-width: 40rem;                            /* ~640px */
  white-space: pre-wrap;                       /* keep newlines */
}

/* subtle fade/scale */
@keyframes tip-fade {
  from { opacity: 0; transform: translateY(4px) scale(.98); }
  to   { opacity: 1; transform: translateY(0)    scale(1); }
}

/* respect motion prefs */
@media (prefers-reduced-motion: reduce) {
  :host ::ng-deep .p-tooltip.desc-tip { animation: none; }
}

/* Responsive: stack header rows on small screens */
@media (max-width: 640px) {
  .tag-filter__header {
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
  }
  .tag-filter__right {
    justify-content: space-between;
  }
}
