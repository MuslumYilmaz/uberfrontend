<div class="page-frame">
    <!-- Sidebar -->
    <aside class="side">
        <div class="side-head">
            <div class="side-title">All Questions</div>
        </div>

        <ul class="side-list">
            <li *ngFor="let q of questionsList">
                <button class="side-item" [class.is-active]="isActive(q)" (click)="onSelect(q)">
                    <div class="side-item-main">
                        <div class="side-item-title">{{ q.title }}</div>
                        <div class="side-item-desc line-clamp-2">{{ q.description }}</div>
                    </div>
                    <div class="side-item-tail">
                        <i class="pi pi-angle-right" *ngIf="!isActive(q)"></i>
                        <i class="pi pi-check-circle ok" *ngIf="isActive(q)"></i>
                    </div>
                </button>
            </li>
        </ul>
    </aside>

    <!-- Detail -->
    <main class="main">
        <div *ngIf="question() as q; else missing" class="main-stack">
            <!-- Title + chips -->
            <header class="title-block">
                <h1 class="title">{{ q.title }}</h1>

                <div class="meta-chips">
                    <span class="chip chip-freq">{{ importanceLabel(q.importance) }}</span>
                    <span class="chip chip-diff">{{ difficultyLabel(q.difficulty) }}</span>
                    <span class="chip chip-tech">{{ (q.technology || 'â€”') | titlecase }}</span>
                </div>
            </header>

            <!-- Question -->
            <section class="card">
                <div class="card-head">Question</div>
                <div class="card-body">
                    <p class="content">{{ q.description }}</p>
                </div>
            </section>

            <!-- Answer -->
            <section class="card">
                <div class="card-head">Answer</div>
                <div class="card-body">
                    <p class="content" *ngIf="q.answer; else noAnswer">{{ q.answer }}</p>
                    <ng-template #noAnswer>
                        <p class="content muted">Answer coming soon.</p>
                    </ng-template>
                </div>
            </section>
        </div>

        <ng-template #missing>
            <div class="empty">
                <div class="empty-text">Question not found.</div>
            </div>
        </ng-template>
    </main>
</div>

<!-- Footer (practice mode) -->
<app-footer [mode]="'practice'" [progressText]="progressText()" [prevDisabled]="!hasPrev()" [nextDisabled]="!hasNext()"
    (prev)="prev()" (next)="next()" (back)="returnTo ? router.navigate(returnTo) : null">
</app-footer>