:host {
  --filter-chip-h: 44px;
  --filter-chip-pad-x: 16px;
  --filter-chip-gap: 12px;
  --filter-chip-radius: 14px;
  --filter-segment-radius: 12px;
  --filter-segment-h: 38px;
  --filter-muted-bg: color-mix(in srgb, var(--uf-surface) 88%, var(--uf-surface-alt));
  --filter-muted-border: color-mix(in srgb, var(--uf-border-subtle) 78%, var(--uf-text-secondary) 22%);
  --filter-active-bg: color-mix(in srgb, var(--uf-accent) 24%, var(--uf-surface));
  --filter-active-border: color-mix(in srgb, var(--uf-accent) 56%, var(--uf-border-subtle));
  --filter-focus-ring: 0 0 0 2px color-mix(in srgb, var(--uf-accent) 45%, transparent);

  display: block;
  margin-bottom: 1.5rem;
}

.filterbar-shell {
  margin-bottom: 12px;
}

.filterbar-title {
  margin: 0 0 16px;
  color: var(--uf-text-primary);
  font-size: clamp(2rem, 4vw, 3.5rem);
  line-height: 1.06;
  letter-spacing: -0.02em;
  font-weight: 800;
}

.chip-row-scroll {
  overflow-x: auto;
  padding-bottom: 2px;
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, var(--uf-accent) 35%, var(--uf-border-subtle)) transparent;
}

.chip-row {
  display: flex;
  align-items: center;
  gap: var(--filter-chip-gap);
  flex-wrap: wrap;
  min-width: max-content;
}

.chip-row--primary {
  min-height: var(--filter-chip-h);
}

.filter-chip-label {
  white-space: nowrap;
  letter-spacing: 0.01em;
}

.tabs-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  margin-bottom: 1.25rem;
  flex-wrap: wrap;
  gap: 12px;
}

.tabs-left {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tabs-left--segmented {
  position: relative;
  padding: 2px;
  border: 1px solid color-mix(in srgb, var(--uf-border-subtle) 82%, var(--uf-text-secondary) 18%);
  background: color-mix(in srgb, var(--uf-surface) 90%, var(--uf-surface-alt));
  border-radius: var(--filter-chip-radius);
  gap: 0;
  overflow: hidden;
}

.tabs-left--segmented.has-tabs {
  display: grid;
  grid-template-columns: 1fr 1fr;
  min-height: var(--filter-segment-h);
}

.segment-indicator {
  position: absolute;
  left: 2px;
  top: 2px;
  bottom: 2px;
  width: calc(50% - 2px);
  border-radius: var(--filter-segment-radius);
  border: 1px solid color-mix(in srgb, var(--uf-accent) 52%, var(--uf-border-subtle));
  background: color-mix(in srgb, var(--uf-accent) 22%, var(--uf-surface));
  box-shadow: inset 0 1px 0 color-mix(in srgb, var(--uf-text-primary) 14%, transparent);
  transform: translateX(0);
  transition: transform var(--uf-motion-base) cubic-bezier(.2,.8,.2,1);
  pointer-events: none;
  will-change: transform;
}

.tabs-left--segmented.is-quiz .segment-indicator {
  transform: translateX(100%);
}

.tabs-right {
  display: inline-flex;
  align-items: center;
}

fa-chip.filter-chip--primary {
  --fa-chip-min-h: var(--filter-chip-h);
  --fa-chip-pad-y: 0;
  --fa-chip-pad-x: var(--filter-chip-pad-x);
  --fa-chip-gap: 10px;
  --fa-chip-radius: var(--filter-chip-radius);
  --fa-chip-font-size: 14px;
  --fa-chip-bg: var(--filter-muted-bg);
  --fa-chip-border: var(--filter-muted-border);
  --fa-chip-hover: color-mix(in srgb, var(--filter-muted-bg) 88%, var(--uf-text-primary) 12%);
  --fa-chip-active: color-mix(in srgb, var(--filter-muted-bg) 84%, var(--uf-text-primary) 16%);
  --fa-chip-selected-bg: var(--filter-active-bg);
  --fa-chip-selected-border: var(--filter-active-border);
  --fa-chip-selected-ring: none;
  --fa-chip-focus-ring: var(--filter-focus-ring);
  --fa-chip-ink: color-mix(in srgb, var(--uf-text-secondary) 85%, transparent);
  --fa-chip-ink-strong: var(--uf-text-primary);
}

fa-chip.filter-chip--secondary {
  --fa-chip-min-h: calc(var(--filter-segment-h) - 4px);
  --fa-chip-pad-y: 0;
  --fa-chip-pad-x: 12px;
  --fa-chip-radius: var(--filter-segment-radius);
  --fa-chip-font-size: 13px;
  --fa-chip-bg: transparent;
  --fa-chip-border: color-mix(in srgb, var(--uf-border-subtle) 35%, transparent);
  --fa-chip-hover-border: transparent;
  --fa-chip-active-border: transparent;
  --fa-chip-hover: color-mix(in srgb, var(--uf-text-primary) 8%, transparent);
  --fa-chip-active: color-mix(in srgb, var(--uf-text-primary) 10%, transparent);
  --fa-chip-selected-bg: transparent;
  --fa-chip-selected-border: transparent;
  --fa-chip-selected-ring: none;
  --fa-chip-focus-ring: var(--filter-focus-ring);
  --fa-chip-ink: color-mix(in srgb, var(--uf-text-secondary) 85%, transparent);
  --fa-chip-ink-strong: var(--uf-text-primary);
  --fa-chip-width: 100%;
  --fa-chip-justify: center;
  display: block;
  position: relative;
  z-index: 1;
  transition: color var(--uf-motion-fast) ease;
}

fa-chip.filter-chip--count {
  --fa-chip-min-h: 34px;
  --fa-chip-pad-y: 0;
  --fa-chip-pad-x: 12px;
  --fa-chip-radius: 10px;
  --fa-chip-font-size: 12px;
  --fa-chip-bg: color-mix(in srgb, var(--uf-text-primary) 5%, var(--uf-surface));
  --fa-chip-border: color-mix(in srgb, var(--uf-border-subtle) 86%, var(--uf-text-secondary) 14%);
  --fa-chip-hover: color-mix(in srgb, var(--uf-text-primary) 8%, var(--uf-surface));
  --fa-chip-active: color-mix(in srgb, var(--uf-text-primary) 10%, var(--uf-surface));
  --fa-chip-selected-bg: var(--fa-chip-bg);
  --fa-chip-selected-border: var(--fa-chip-border);
  --fa-chip-selected-ring: none;
  --fa-chip-focus-ring: var(--filter-focus-ring);
  --fa-chip-ink: color-mix(in srgb, var(--uf-text-tertiary) 86%, transparent);
}

.tech-badge {
  width: 26px;
  height: 26px;
  display: grid;
  place-items: center;
  border-radius: 8px;
  font-weight: 700;
  font-size: 11px;
  border: 1px solid color-mix(in srgb, var(--uf-border-subtle) 66%, var(--uf-text-secondary) 34%);
  line-height: 1;
  filter: saturate(0.88) brightness(0.96);
}

.count-chip {
  font-weight: 600;
}

.tabs-left--segmented.has-tabs fa-chip.filter-chip--secondary.fa-chip--selected {
  color: var(--uf-text-primary);
}

@media (max-width: 640px) {
  .filterbar-shell {
    margin-bottom: 10px;
  }

  .filterbar-title {
    margin-bottom: 14px;
  }

  .chip-row {
    gap: 10px;
    min-width: auto;
  }

  .chip-row--primary {
    flex-wrap: nowrap;
    width: max-content;
  }

  .tabs-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .tabs-right {
    width: 100%;
  }

  .tabs-left--segmented {
    width: fit-content;
  }
}

@media (prefers-reduced-motion: reduce) {
  .segment-indicator {
    transition: none;
  }
}
