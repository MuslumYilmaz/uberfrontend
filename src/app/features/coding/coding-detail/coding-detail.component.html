<div class="flex h-full">
  <!-- LEFT COLUMN -->
  <aside class="w-80 border-r flex flex-col">
    <!-- 1) Make the accordion scroll -->
    <p-accordion class="flex-1 overflow-auto" [multiple]="false" [activeIndex]="activePanel()">
      <p-accordionTab header="Problem Description">
        <div class="whitespace-pre-wrap">
          {{ question()?.description }}
        </div>
      </p-accordionTab>

      <p-accordionTab header="Solution Explanation">
        <div class="whitespace-pre-wrap">
          {{ question()?.solution }}
        </div>
        <button pButton label="Load Solution Code" icon="pi pi-code" class="mt-3" (click)="showSolution()"></button>
      </p-accordionTab>

      <p-accordionTab header="Test Cases">
        <ul class="list-disc pl-5">
          <li *ngFor="let t of question()?.tags">{{ t }}</li>
        </ul>
      </p-accordionTab>
    </p-accordion>

    <!-- 2) Prev/Next footer never flexes -->
    <div class="flex-none p-4 border-t flex items-center justify-between">
      <button pButton label="← Prev" icon="pi pi-arrow-left" (click)="prev()" [disabled]="currentIndex === 0"></button>
      <span>{{ progressText }}</span>
      <button pButton label="Next →" icon="pi pi-arrow-right" iconPos="right" (click)="next()"
        [disabled]="currentIndex + 1 >= allQuestions.length"></button>
    </div>
  </aside>

  <!-- RIGHT COLUMN -->
  <main class="flex-1 flex flex-col overflow-hidden bg-white dark:bg-gray-900">
    <!-- 3) Editor grows and scrolls if needed -->
    <app-monaco-editor class="flex-1 h-screen" [code]="editorContent()"
      [language]="tech === 'angular' ? 'typescript' : 'javascript'"></app-monaco-editor>

    <!-- 4) Editor actions never flex -->
    <div class="flex-none p-4 border-t bg-gray-50 flex justify-end space-x-2">
      <button pButton label="Run" icon="pi pi-play" (click)="runCode()"></button>
      <button pButton label="Submit" icon="pi pi-check" (click)="submitCode()"></button>
    </div>
  </main>
</div>