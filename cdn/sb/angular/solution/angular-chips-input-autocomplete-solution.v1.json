{
  "version": "v1",
  "type": "user-interface",
  "title": "Angular Invite Chips Input (solution)",
  "openFile": "/src/app/app.component.ts",
  "dependencies": {
    "@angular/core": "17.1.0",
    "@angular/common": "17.1.0",
    "@angular/forms": "17.1.0",
    "@angular/platform-browser": "17.1.0",
    "rxjs": "7.8.1",
    "zone.js": "^0.14.2"
  },
  "files": {
    "/package.json": {
      "code": "{\n  \"name\": \"angular-chips-input-autocomplete-solution\",\n  \"private\": true\n}\n"
    },
    "/src/main.ts": {
      "code": "import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nbootstrapApplication(AppComponent).catch(console.error);\n"
    },
    "/src/index.html": {
      "code": "<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <title>Angular SDK • Invite Chips (solution)</title>\n  </head>\n  <body>\n    <app-root></app-root>\n  </body>\n</html>\n"
    },
    "/src/app/app.component.ts": {
      "code": "import { CommonModule } from '@angular/common';\nimport { Component, ElementRef, HostListener, inject } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\ntype Candidate = {\n  id: string;\n  name: string;\n  email: string;\n};\n\ntype Chip = {\n  id: string;\n  label: string;\n  value: string;\n};\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  private readonly host = inject(ElementRef<HTMLElement>);\n\n  readonly listboxId = 'invite-suggestions';\n\n  readonly users: Candidate[] = [\n    { id: 'alice', name: 'Alice Johnson', email: 'alice@frontendatlas.dev' },\n    { id: 'bob', name: 'Bob Smith', email: 'bob@frontendatlas.dev' },\n    { id: 'charlie', name: 'Charlie Kim', email: 'charlie@frontendatlas.dev' },\n    { id: 'diana', name: 'Diana Lopez', email: 'diana@frontendatlas.dev' },\n    { id: 'ethan', name: 'Ethan Brown', email: 'ethan@frontendatlas.dev' },\n    { id: 'fiona', name: 'Fiona Patel', email: 'fiona@frontendatlas.dev' },\n    { id: 'george', name: 'George Miller', email: 'george@frontendatlas.dev' }\n  ];\n\n  chips: Chip[] = [];\n  query = '';\n  isOpen = false;\n  activeIndex = -1;\n\n  get suggestions(): Chip[] {\n    const needle = this.normalize(this.query);\n    if (!needle) return [];\n\n    const selectedIds = new Set(this.chips.map((chip) => chip.id));\n\n    return this.users\n      .filter((user) => {\n        if (selectedIds.has(user.id)) return false;\n        const haystack = (user.name + ' ' + user.email).toLowerCase();\n        return haystack.includes(needle);\n      })\n      .slice(0, 6)\n      .map((user) => ({\n        id: user.id,\n        label: user.name,\n        value: user.email\n      }));\n  }\n\n  onInput(value: string): void {\n    this.query = value;\n    this.activeIndex = -1;\n    this.syncOpenState();\n  }\n\n  onFocus(): void {\n    this.syncOpenState();\n  }\n\n  addChip(chip: Chip): void {\n    const hasDuplicate = this.chips.some(\n      (item) => item.id === chip.id || this.normalize(item.value) === this.normalize(chip.value)\n    );\n    if (hasDuplicate) {\n      this.query = '';\n      this.isOpen = false;\n      this.activeIndex = -1;\n      return;\n    }\n\n    this.chips = [...this.chips, chip];\n    this.query = '';\n    this.isOpen = false;\n    this.activeIndex = -1;\n  }\n\n  addCustomFromQuery(): void {\n    const raw = this.query.trim();\n    if (!raw) return;\n\n    this.addChip({\n      id: 'custom-' + this.normalize(raw),\n      label: raw,\n      value: raw\n    });\n  }\n\n  removeChip(chipId: string): void {\n    this.chips = this.chips.filter((chip) => chip.id !== chipId);\n    this.syncOpenState();\n  }\n\n  selectSuggestion(chip: Chip): void {\n    this.addChip(chip);\n  }\n\n  handleKeyDown(event: KeyboardEvent): void {\n    const suggestions = this.suggestions;\n    const len = suggestions.length;\n\n    if (event.key === 'ArrowDown') {\n      event.preventDefault();\n      if (!len) return;\n      this.isOpen = true;\n      this.activeIndex = this.activeIndex < 0 ? 0 : (this.activeIndex + 1) % len;\n      return;\n    }\n\n    if (event.key === 'ArrowUp') {\n      event.preventDefault();\n      if (!len) return;\n      this.isOpen = true;\n      this.activeIndex = this.activeIndex < 0 ? len - 1 : (this.activeIndex - 1 + len) % len;\n      return;\n    }\n\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      if (this.isOpen && this.activeIndex >= 0 && this.activeIndex < len) {\n        this.addChip(suggestions[this.activeIndex]);\n      } else {\n        this.addCustomFromQuery();\n      }\n      return;\n    }\n\n    if (event.key === ',') {\n      event.preventDefault();\n      this.addCustomFromQuery();\n      return;\n    }\n\n    if (event.key === 'Backspace' && !this.query && this.chips.length > 0) {\n      this.chips = this.chips.slice(0, -1);\n      this.syncOpenState();\n      return;\n    }\n\n    if (event.key === 'Escape') {\n      this.isOpen = false;\n      this.activeIndex = -1;\n    }\n  }\n\n  trackById(_: number, item: Chip): string {\n    return item.id;\n  }\n\n  optionId(index: number): string {\n    return 'invite-option-' + String(index);\n  }\n\n  get activeDescendant(): string | null {\n    return this.activeIndex >= 0 ? this.optionId(this.activeIndex) : null;\n  }\n\n  @HostListener('document:mousedown', ['$event'])\n  onDocMouseDown(event: MouseEvent): void {\n    const target = event.target as Node | null;\n    if (!target) return;\n    if (!this.host.nativeElement.contains(target)) {\n      this.isOpen = false;\n      this.activeIndex = -1;\n    }\n  }\n\n  private syncOpenState(): void {\n    const hasQuery = this.normalize(this.query).length > 0;\n    this.isOpen = hasQuery && this.suggestions.length > 0;\n    if (!this.isOpen) {\n      this.activeIndex = -1;\n    }\n  }\n\n  private normalize(value: string): string {\n    return value.trim().toLowerCase();\n  }\n}\n"
    },
    "/src/app/app.component.html": {
      "code": "<main class=\"page\">\n  <section class=\"card\">\n    <h1>Invite people</h1>\n    <p class=\"subtitle\">\n      Build a chips input with autocomplete, keyboard shortcuts, and removable tags.\n    </p>\n\n    <div\n      class=\"combobox\"\n      role=\"combobox\"\n      [attr.aria-expanded]=\"isOpen\"\n      aria-haspopup=\"listbox\"\n      [attr.aria-owns]=\"listboxId\"\n      [attr.aria-activedescendant]=\"activeDescendant\"\n    >\n      <div class=\"chip-input\">\n        <span class=\"chip\" *ngFor=\"let chip of chips; trackBy: trackById\">\n          <span>{{ chip.label }}</span>\n          <button\n            type=\"button\"\n            class=\"chip-remove\"\n            (click)=\"removeChip(chip.id)\"\n            [attr.aria-label]=\"'Remove ' + chip.label\"\n          >\n            ×\n          </button>\n        </span>\n\n        <input\n          type=\"text\"\n          [ngModel]=\"query\"\n          (ngModelChange)=\"onInput($event)\"\n          (focus)=\"onFocus()\"\n          (keydown)=\"handleKeyDown($event)\"\n          placeholder=\"Type a name or email...\"\n        />\n      </div>\n\n      <ul *ngIf=\"isOpen\" [id]=\"listboxId\" class=\"suggestions\" role=\"listbox\">\n        <li\n          *ngFor=\"let item of suggestions; let i = index; trackBy: trackById\"\n          [id]=\"optionId(i)\"\n          role=\"option\"\n          [attr.aria-selected]=\"i === activeIndex\"\n          [class.suggestion]=\"true\"\n          [class.active]=\"i === activeIndex\"\n          (mousedown)=\"selectSuggestion(item)\"\n        >\n          <strong>{{ item.label }}</strong>\n          <span>{{ item.value }}</span>\n        </li>\n      </ul>\n    </div>\n\n    <p class=\"hint\">\n      Keyboard: Arrow keys navigate, Enter/comma add chip, Backspace removes the last chip.\n    </p>\n  </section>\n</main>\n"
    },
    "/src/app/app.component.css": {
      "code": ".page{min-height:100vh;display:grid;place-items:center;padding:24px;background:#0a0a0a;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}\n.card{width:100%;max-width:640px;background:#0b1020;border:1px solid #1f2937;border-radius:14px;padding:18px;display:grid;gap:12px;}\nh1{margin:0;font-size:20px;}\n.subtitle{margin:0;color:#9ca3af;font-size:14px;line-height:1.45;}\n.combobox{position:relative;}\n.chip-input{display:flex;flex-wrap:wrap;align-items:center;gap:8px;padding:10px;border-radius:12px;border:1px solid #374151;background:#0a0f1e;}\n.chip-input:focus-within{border-color:#a3e635;box-shadow:0 0 0 2px rgba(163,230,53,.15);}\n.chip{display:inline-flex;align-items:center;gap:8px;padding:4px 10px;border-radius:999px;background:#172036;border:1px solid #2c3c62;font-size:13px;}\n.chip-remove{border:none;background:transparent;color:#9ca3af;cursor:pointer;font-size:16px;line-height:1;padding:0;}\n.chip-remove:hover{color:#e5e7eb;}\n.chip-input input{flex:1;min-width:180px;border:none;outline:none;background:transparent;color:#e5e7eb;font-size:14px;padding:4px 0;}\n.chip-input input::placeholder{color:#6b7280;}\n.suggestions{position:absolute;left:0;right:0;z-index:10;margin-top:8px;max-height:260px;overflow:auto;border-radius:12px;border:1px solid #1f2937;background:#0a0f1e;padding:0;list-style:none;}\n.suggestion{display:grid;gap:2px;padding:10px 12px;border-bottom:1px solid rgba(31,41,55,.5);cursor:pointer;}\n.suggestion:last-child{border-bottom:none;}\n.suggestion span{font-size:12px;color:#9ca3af;}\n.suggestion.active{background:rgba(163,230,53,.12);}\n.hint{margin:0;color:#9ca3af;font-size:12px;}\n"
    },
    "/src/styles.css": {
      "code": ":root{color-scheme:dark;}html,body{margin:0;height:100%;background:#0a0a0a;}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}\n"
    },
    "/tsconfig.json": {
      "code": "{\n  \"compilerOptions\": {\n    \"target\": \"es2022\",\n    \"strict\": true,\n    \"noEmitOnError\": false\n  }\n}\n"
    }
  }
}
