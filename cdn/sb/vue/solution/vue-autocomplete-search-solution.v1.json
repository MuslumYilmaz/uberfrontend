{
    "dependencies": {
        "vue": "3.x"
    },
    "openFile": "/src/App.vue",
    "files": {
        "package.json": "{\n  \"name\": \"vue-autocomplete-search-solution\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"dependencies\": {\n    \"vue\": \"3.x\"\n  },\n  \"scripts\": {\n    \"serve\": \"vue-cli-service serve\"\n  }\n}\n",
        "public/index.html": "<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"><title>Vue SDK • Autocomplete (solution)</title></head><body><div id=\"app\"></div></body></html>",
        "src/main.ts": "import { createApp } from 'vue';\nimport App from './App.vue';\nimport './App.css';\n\ncreateApp(App).mount('#app');\n",
        "src/App.vue": "<template>\n  <main class=\"page\">\n    <section class=\"card\">\n      <h1 class=\"title\">Autocomplete</h1>\n\n      <div\n        ref=\"rootRef\"\n        class=\"combo\"\n        role=\"combobox\"\n        aria-haspopup=\"listbox\"\n        :aria-expanded=\"isOpen\"\n        :aria-owns=\"listboxId\"\n        :aria-activedescendant=\"activeDesc\"\n      >\n        <label class=\"label\" for=\"q\">Search</label>\n        <input\n          id=\"q\"\n          class=\"input\"\n          type=\"text\"\n          autocomplete=\"off\"\n          placeholder=\"Type a city...\"\n          :value=\"query\"\n          @input=\"onInput\"\n          @focus=\"onFocus\"\n          @keydown=\"onKeyDown\"\n        />\n\n        <ul v-if=\"isOpen\" class=\"list\" role=\"listbox\" :id=\"listboxId\">\n          <li\n            v-for=\"(item, i) in results\"\n            :key=\"item\"\n            class=\"option\"\n            :class=\"{ active: i === activeIndex }\"\n            role=\"option\"\n            :id=\"optionId(i)\"\n            :aria-selected=\"i === activeIndex\"\n            @mousedown=\"select(item)\"\n            v-html=\"highlight(item, query)\"\n          />\n\n          <li v-if=\"isLoading\" class=\"empty\">Loading…</li>\n          <li v-else-if=\"results.length === 0\" class=\"empty\">No results</li>\n        </ul>\n      </div>\n\n      <p class=\"hint\">Keyboard: ↑/↓ navigate, Enter select, Esc close.</p>\n    </section>\n  </main>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from 'vue';\n\nconst listboxId = 'autocomplete-listbox';\n\nconst CITIES: string[] = [\n  'Amsterdam', 'Ankara', 'Athens', 'Austin',\n  'Barcelona', 'Berlin', 'Boston', 'Brussels',\n  'Chicago', 'Copenhagen',\n  'Dubai',\n  'Edinburgh',\n  'Frankfurt',\n  'Hamburg',\n  'Istanbul', 'Izmir',\n  'London', 'Los Angeles',\n  'Madrid', 'Miami', 'Milan', 'Munich',\n  'New York',\n  'Oslo',\n  'Paris', 'Prague',\n  'Rome',\n  'San Diego', 'San Francisco', 'San Jose', 'Seattle',\n  'Tokyo',\n  'Vienna',\n  'Zurich'\n];\n\nfunction sleep(ms: number) {\n  return new Promise<void>((res) => setTimeout(res, ms));\n}\n\nconst rootRef = ref<HTMLElement | null>(null);\n\nconst query = ref('');\nconst isOpen = ref(false);\nconst activeIndex = ref(-1);\nconst results = ref<string[]>([]);\nconst isLoading = ref(false);\n\nconst activeDesc = computed(() => (activeIndex.value >= 0 ? optionId(activeIndex.value) : undefined));\n\nlet debounceHandle: number | undefined;\nlet seq = 0;\n\nwatch(query, (next) => {\n  const q = String(next ?? '').trim();\n\n  if (debounceHandle != null) {\n    window.clearTimeout(debounceHandle);\n    debounceHandle = undefined;\n  }\n\n  if (!q) {\n    isOpen.value = false;\n    activeIndex.value = -1;\n    results.value = [];\n    isLoading.value = false;\n    return;\n  }\n\n  isOpen.value = true;\n  activeIndex.value = -1;\n  isLoading.value = true;\n\n  const mySeq = ++seq;\n\n  debounceHandle = window.setTimeout(async () => {\n    const data = await search(q);\n    if (seq !== mySeq) return;\n    results.value = data;\n    isLoading.value = false;\n  }, 300);\n});\n\nfunction onInput(e: Event) {\n  const el = e.target as HTMLInputElement | null;\n  query.value = el?.value ?? '';\n}\n\nfunction onFocus() {\n  const q = query.value.trim();\n  if (q) isOpen.value = true;\n}\n\nfunction onKeyDown(ev: KeyboardEvent) {\n  if (ev.key === 'Escape') {\n    isOpen.value = false;\n    activeIndex.value = -1;\n    return;\n  }\n\n  if (!isOpen.value && (ev.key === 'ArrowDown' || ev.key === 'ArrowUp')) {\n    const q = query.value.trim();\n    isOpen.value = !!q;\n  }\n\n  const len = results.value.length;\n  if (!isOpen.value || len === 0) return;\n\n  if (ev.key === 'ArrowDown') {\n    ev.preventDefault();\n    activeIndex.value = activeIndex.value < 0 ? 0 : (activeIndex.value + 1) % len;\n    return;\n  }\n\n  if (ev.key === 'ArrowUp') {\n    ev.preventDefault();\n    activeIndex.value = activeIndex.value < 0 ? len - 1 : (activeIndex.value - 1 + len) % len;\n    return;\n  }\n\n  if (ev.key === 'Enter') {\n    if (activeIndex.value >= 0 && activeIndex.value < len) {\n      ev.preventDefault();\n      select(results.value[activeIndex.value]);\n    }\n    return;\n  }\n}\n\nfunction select(value: string) {\n  query.value = value;\n  isOpen.value = false;\n  activeIndex.value = -1;\n}\n\nfunction optionId(i: number): string {\n  return `opt-${i}`;\n}\n\nfunction highlight(item: string, queryRaw: unknown): string {\n  const q = String(queryRaw ?? '').trim();\n  if (!q) return escapeHtml(item);\n\n  const idx = item.toLowerCase().indexOf(q.toLowerCase());\n  if (idx < 0) return escapeHtml(item);\n\n  const before = escapeHtml(item.slice(0, idx));\n  const mid = escapeHtml(item.slice(idx, idx + q.length));\n  const after = escapeHtml(item.slice(idx + q.length));\n  return `${before}<mark>${mid}</mark>${after}`;\n}\n\nfunction escapeHtml(s: string): string {\n  return s\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction onDocMouseDown(e: MouseEvent) {\n  const root = rootRef.value;\n  const target = e.target as Node | null;\n  if (!root || !target) return;\n  if (!root.contains(target)) {\n    isOpen.value = false;\n    activeIndex.value = -1;\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('mousedown', onDocMouseDown);\n});\n\nonBeforeUnmount(() => {\n  document.removeEventListener('mousedown', onDocMouseDown);\n  if (debounceHandle != null) {\n    window.clearTimeout(debounceHandle);\n    debounceHandle = undefined;\n  }\n});\n\nasync function search(q: string): Promise<string[]> {\n  const needle = q.toLowerCase();\n  const filtered = CITIES\n    .filter((c) => c.toLowerCase().includes(needle))\n    .slice(0, 8);\n\n  await sleep(150);\n  return filtered;\n}\n</script>\n",
        "src/App.css": ":root{color-scheme:dark;}html,body{margin:0;height:100%;background:#0a0a0a;}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}\n.page{min-height:100vh;display:grid;place-items:center;padding:24px;background:#0a0a0a;color:#e5e7eb;}\n.card{width:100%;max-width:520px;background:#0b1020;border:1px solid #1f2937;border-radius:14px;padding:18px;display:grid;gap:14px;}\n.title{margin:0;font-size:18px;font-weight:800;}\n.label{display:block;font-size:12px;color:#9ca3af;margin-bottom:6px;}\n.combo{position:relative;}\n.input{width:100%;padding:12px 12px;border-radius:12px;border:1px solid #374151;background:#0a0f1e;color:#e5e7eb;outline:none;}\n.input:focus{border-color:#a3e635;box-shadow:0 0 0 2px rgba(163,230,53,.15);}\n.list{position:absolute;z-index:10;left:0;right:0;margin-top:8px;max-height:240px;overflow:auto;border-radius:12px;border:1px solid #1f2937;background:#0a0f1e;}\n.option{padding:10px 12px;cursor:pointer;border-bottom:1px solid rgba(31,41,55,.5);}\n.option:last-child{border-bottom:none;}\n.option.active{background:rgba(163,230,53,.12);}\n.empty{padding:10px 12px;color:#9ca3af;}\n.hint{margin:0;color:#9ca3af;font-size:12px;}\nmark{background:rgba(163,230,53,.25);color:#e5e7eb;border-radius:4px;padding:0 2px;}\n",
        "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"Node\",\n    \"strict\": true,\n    \"allowJs\": true\n  }\n}\n"
    }
}