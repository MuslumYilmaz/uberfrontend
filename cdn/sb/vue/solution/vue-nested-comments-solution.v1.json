{
    "version": "v2",
    "type": "user-interface",
    "title": "Vue • Nested Comments (solution)",
    "openFile": "/src/App.vue",
    "dependencies": {
        "vue": "3.x"
    },
    "files": {
        "package.json": "{\n  \"name\": \"vue-nested-comments-solution\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"dependencies\": {\n    \"vue\": \"3.x\"\n  },\n  \"scripts\": {\n    \"serve\": \"vue-cli-service serve\"\n  }\n}\n",
        "public/index.html": "<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"><title>Vue SDK • Nested Comments (solution)</title></head><body><div id=\"app\"></div></body></html>",
        "src/main.ts": "import { createApp } from 'vue';\nimport App from './App.vue';\nimport './App.css';\n\ncreateApp(App).mount('#app');\n",
        "src/App.vue": "<template>\n  <main class=\"page\">\n    <section class=\"card\">\n      <h1 class=\"title\">Nested Comments (Solution)</h1>\n      <p class=\"subtitle\">Infinite replies, single active reply input, recursive rendering.</p>\n\n      <div class=\"composer\">\n        <textarea v-model=\"topDraft\" rows=\"3\" placeholder=\"Write a comment...\"></textarea>\n        <button @click=\"addTop\">Add Comment</button>\n      </div>\n\n      <div class=\"list\">\n        <Tree :nodes=\"comments\" :depth=\"0\" />\n      </div>\n\n      <div class=\"hint\">Click Reply on different comments: the input should move, not duplicate.</div>\n    </section>\n  </main>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineComponent, h, ref } from 'vue';\n\ntype CommentNode = {\n  id: string;\n  text: string;\n  children: CommentNode[];\n};\n\nconst comments = ref<CommentNode[]>([]);\nconst topDraft = ref('');\n\nconst activeReplyId = ref<string | null>(null);\nconst replyDraft = ref('');\n\nconst nextId = ref(1);\nconst makeId = () => String(nextId.value++);\n\nconst addTop = () => {\n  const text = topDraft.value.trim();\n  if (!text) return;\n\n  comments.value.unshift({ id: makeId(), text, children: [] });\n  topDraft.value = '';\n};\n\nconst openReply = (id: string) => {\n  activeReplyId.value = id;\n  replyDraft.value = '';\n};\n\nconst cancelReply = () => {\n  activeReplyId.value = null;\n  replyDraft.value = '';\n};\n\nconst findById = (nodes: CommentNode[], id: string): CommentNode | null => {\n  for (const n of nodes) {\n    if (n.id === id) return n;\n    const found = findById(n.children, id);\n    if (found) return found;\n  }\n  return null;\n};\n\nconst submitReply = (parentId: string) => {\n  const text = replyDraft.value.trim();\n  if (!text) return;\n\n  const parent = findById(comments.value, parentId);\n  if (!parent) return;\n\n  parent.children.push({ id: makeId(), text, children: [] });\n  cancelReply();\n};\n\nconst Tree = defineComponent({\n  name: 'Tree',\n  props: {\n    nodes: { type: Array as () => CommentNode[], required: true },\n    depth: { type: Number, required: true }\n  },\n  setup(props) {\n    return () =>\n      h(\n        'div',\n        {},\n        props.nodes.map((c) =>\n          h(\n            'div',\n            { class: 'node', style: { marginLeft: `${props.depth * 16}px` }, key: c.id },\n            [\n              h('div', { class: 'bubble' }, [\n                h('div', { class: 'text' }, c.text),\n                h('div', { class: 'meta' }, [\n                  h(\n                    'button',\n                    { class: 'ghost', onClick: () => openReply(c.id) },\n                    'Reply'\n                  )\n                ]),\n\n                activeReplyId.value === c.id\n                  ? h('div', { class: 'reply' }, [\n                      h('input', {\n                        value: replyDraft.value,\n                        onInput: (e: Event) => (replyDraft.value = (e.target as HTMLInputElement).value),\n                        placeholder: 'Write a reply...'\n                      }),\n                      h('div', { class: 'replyActions' }, [\n                        h('button', { onClick: () => submitReply(c.id) }, 'Post'),\n                        h('button', { class: 'ghost', onClick: cancelReply }, 'Cancel')\n                      ])\n                    ])\n                  : null\n              ]),\n\n              c.children.length\n                ? h(Tree, { nodes: c.children, depth: props.depth + 1 })\n                : null\n            ]\n          )\n        )\n      );\n  }\n});\n</script>\n",
        "src/App.css": ":root { color-scheme: dark; }\nhtml, body { margin: 0; height: 100%; background:#0a0a0a; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }\n\n.page { min-height:100vh; display:grid; place-items:center; background:#0a0a0a; padding:24px; }\n.card { width:100%; max-width:720px; background:#0b1020; border:1px solid #1f2937; border-radius:16px; padding:18px; display:grid; gap:14px; color:#e5e7eb; }\n.title { margin:0; font-size:20px; font-weight:900; color:#e5e7eb; }\n.subtitle { margin:0; color:#9ca3af; font-size:12px; line-height:1.45; }\n\n.composer { display:grid; gap:10px; }\ntextarea { width:100%; resize:vertical; min-height:70px; background:#0a0f1e; color:#e5e7eb; border:1px solid #1f2937; border-radius:12px; padding:10px; }\ntextarea::placeholder { color:#6b7280; }\n\n.list { display:grid; gap:10px; }\n.node { display:grid; gap:8px; }\n.bubble { background:#0a0f1e; border:1px solid #1f2937; border-radius:14px; padding:12px; display:grid; gap:10px; color:#e5e7eb; }\n.text { font-size:14px; line-height:1.4; color:#e5e7eb; }\n.meta { display:flex; gap:8px; }\n\n.reply { display:grid; gap:8px; margin-top:6px; }\n.reply input { width:100%; background:#0b1020; color:#e5e7eb; border:1px solid #1f2937; border-radius:12px; padding:10px; }\n.reply input::placeholder { color:#6b7280; }\n.replyActions { display:flex; gap:8px; flex-wrap:wrap; }\n\nbutton { background:#a3e635; color:#111; border:none; border-radius:12px; padding:10px 14px; font-weight:900; cursor:pointer; }\nbutton.ghost { background:transparent; color:#e5e7eb; border:1px solid #374151; }\n\n.hint { color:#9ca3af; font-size:12px; line-height:1.45; }\n",
        "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"module\": \"ESNext\",\n    \"moduleResolution\": \"Node\",\n    \"strict\": true,\n    \"allowJs\": true\n  }\n}\n"
    }
}