{
    "key": "O",
    "title": "Optimizations and deep dive",
    "blocks": [
        {
            "type": "text",
            "text": "Optimizations should focus on preventing UI overload during comment spikes while keeping latency low."
        },
        {
            "type": "divider"
        },
        {
            "type": "checklist",
            "title": "Frontend performance strategies",
            "items": [
                "Batch updates every 100-250ms.",
                "Virtualize list to cap DOM size.",
                "Collapse spam bursts or rate-limit duplicates.",
                "Pause auto-scroll when the user scrolls up.",
                "Lazy-render avatars and badges."
            ]
        },
        {
            "type": "checklist",
            "title": "Reliability and rollout",
            "items": [
                "Reconnect with exponential backoff + jitter.",
                "Fallback to polling if stream fails.",
                "Use feature flags for moderation UI.",
                "Monitor latency + drop rate.",
                "Rollback if UX degrades."
            ]
        },
        {
            "type": "table",
            "title": "Metrics you can quote",
            "columns": [
                "Metric",
                "Target",
                "Why it matters"
            ],
            "rows": [
                [
                    "End-to-end latency",
                    "<= 500ms",
                    "Live feel"
                ],
                [
                    "Dropped frames",
                    "< 2%",
                    "Smooth scrolling"
                ],
                [
                    "DOM cap",
                    "500-1000",
                    "Avoid memory growth"
                ]
            ]
        },
        {
            "type": "stats",
            "items": [
                {
                    "label": "Batch window",
                    "value": "100-250ms",
                    "helperText": "Balances latency vs render cost."
                },
                {
                    "label": "Render budget",
                    "value": "16ms",
                    "helperText": "Keep 60 FPS during spikes."
                },
                {
                    "label": "Reconnect",
                    "value": "<= 5s",
                    "helperText": "Fast recovery target."
                }
            ]
        },
        {
            "type": "callout",
            "variant": "warning",
            "title": "Common pitfalls",
            "text": "Updating the UI for every message, letting the feed grow without bounds, and re-sorting the entire list on every tick are the fastest ways to tank performance."
        }
    ]
}
